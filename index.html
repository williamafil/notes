<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>William&#39;s Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

    

    

    
<link rel="stylesheet" href="/notes/dist/build.css?v=1.5.0.css">


    <script>
        window.aomori = {
            
        }
    </script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>

  <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="avatar avatar-sm">
                <img src="/images/avatar.jpg" alt="Will Doe">
            </div>
            
            <a href="https://williamafil.github.io/notes">William&#39;s Notes</a>
            
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/notes/">Home</a>
                
                <a href="/notes/archives">Archives</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="https://github.com/williamafil/notes/">
        <box-icon type='logo' name='Github'></box-icon>
    </a>

    <a class="social" target="_blank" href="">
        <box-icon type='logo' name=''></box-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/notes/">Home</a>
                    
                    <a href="/notes/archives">Archives</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

  <div class="container">
    <div class="main">
      <section class="inner">
        <section class="inner-main">
          <div class="index">
  
    
      <article
  id="post-JS-Day-49-如何使用-axios-傳遞-token"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/17/JS-Day-49-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-axios-%E5%82%B3%E9%81%9E-token/">JS Day 49: 如何使用 axios 傳遞 token</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="AXIO-GET-Request"><a href="#AXIO-GET-Request" class="headerlink" title="AXIO GET Request"></a>AXIO GET Request</h1><pre><code class="jsx">axios
  .get(&#39;http://www.abcd1234.com/api/users&#39;)
  .then( res =&gt; {
    console.log(res);
  })
  .catch( err =&gt; {
    console.log(err)
  })</code></pre>
<p>一個 GET 請求可以這樣完成。</p>
<p>如果需要更多設定，例如回傳的格式、帳密驗證，就可以把需要設定的一些 key:value 寫在 config 裡面傳遞給 axios。</p>
<h2 id="axios-url-config"><a href="#axios-url-config" class="headerlink" title="axios(url[, config])"></a>axios(url[, config])</h2><pre><code class="jsx">const api = &#39;https://challenge.thef2e.com/api/thef2e2019/stage6/rooms&#39;;
const token = &#39;token_value&#39;;
const roomInfo = axios({
      method: &#39;GET&#39;,
      url: api,
      responseType: &#39;json&#39;, // responseType 也可以寫在 header 裡面
      headers: {
        // accept: &#39;application/json&#39;,
      },
        auth: {
        username: &#39;xiaoming&#39;,
        password: &#39;abc123&#39;
      },
    })
    .then(function (response) {
  console.log(response);
    })
    .catch(function (error) {
      console.log(&#39;錯誤&#39;,error);
    });</code></pre>
<p>這邊的 auth 是一個基本的 HTTP 驗證。它會生成一個 Authorization header 並覆蓋掉原有的。官方文件有特別說明，如果要傳遞 <code>Bearer tokens</code> 需要在 headers 裡頭自定義 <code>Authorization</code>。</p>
<blockquote>
<p>// <code>auth</code> indicates that HTTP Basic auth should be used, and supplies credentials.<br>// This will set an <code>Authorization</code> header, overwriting any existing<br>// <code>Authorization</code> custom headers you have set using <code>headers</code>.<br>// Please note that only HTTP Basic auth is configurable through this parameter.<br>// <strong><em>For Bearer tokens and such, use <code>Authorization</code> custom headers instead.</em></strong></p>
</blockquote>
<p>這邊有更多的 <a href="https://github.com/axios/axios#request-config" target="_blank" rel="noopener">request config</a> 可以參考。</p>
<pre><code class="jsx">const api = &#39;https://challenge.thef2e.com/api/thef2e2019/stage6/rooms&#39;;
const token = &#39;token_value&#39;;
const roomInfo = axios({
      method: &#39;GET&#39;,
      url: api,
      responseType: &#39;json&#39;, // responseType 也可以寫在 header 裡面
      headers: {
            Authorization: `Bearer ${token}` // Bearer 跟 token 中間有一個空格
      }
    })
    .then(function (response) {
  console.log(response);
    })
    .catch(function (error) {
      console.log(&#39;錯誤&#39;,error);
    });</code></pre>
<p>Reference:</p>
<ul>
<li><a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a></li>
</ul>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-17T10:06:23.000Z" itemprop="datePublished">2020-08-17</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AJAX/" rel="tag">AJAX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AXIOS/" rel="tag">AXIOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-47-AJAX-Request-XMLHttpRequest-Fetch-AXIOS"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/16/JS-Day-47-AJAX-Request-XMLHttpRequest-Fetch-AXIOS/">JS Day 47: AJAX Request - XMLHttpRequest, Fetch, AXIOS</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h1><ul>
<li>JavaScript 原生的方法傳送請求</li>
<li>不支援 Promises</li>
<li>語法攏長，較多 callbacks，不好記</li>
</ul>
<h2 id="GET-request"><a href="#GET-request" class="headerlink" title="GET request"></a>GET request</h2><pre><code class="jsx">// GET request
const myReq = new XMLHttpRequest();

myReq.onload = function() {
  const data = JSON.parse(this.responseText);
};

myReq.onerror = function(err) {
  console.log(&#39;Error!&#39;, err);
};

myReq.open(&#39;get&#39;, &#39;https://www.icanhazdadjoke.com/&#39;, true&#39;);
myReq.setRequestHeader(&#39;Accept&#39;, &#39;application/json&#39;);
myReq.send();</code></pre>
<h2 id="POST-request"><a href="#POST-request" class="headerlink" title="POST request"></a>POST request</h2><pre><code class="jsx">// POST request
let xhr = new XMLHttpRequest();
xhr.open(&#39;POST&#39;, &#39;https://hexschool-tutorial.herokuapp.com/api/signup&#39;, true);

// 格式：application/x-www-form-urlencoded
xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);
xhr.send(&#39;email=abcde@gmail.com&#39;);

// 格式：JSON
// let account = {
//   email:&#39;abcdef@gmail.com&#39;,
//   password: &#39;1234&#39;
// };

// xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/json&quot;);
// xhr.send(JSON.stringify(account));</code></pre>
<h2 id="範例：GET-Request-StarWars-API-www-swapi-dev"><a href="#範例：GET-Request-StarWars-API-www-swapi-dev" class="headerlink" title="範例：GET Request StarWars API (www.swapi.dev)"></a>範例：GET Request StarWars API (<a href="https://www.swapi.dev" target="_blank" rel="noopener">www.swapi.dev</a>)</h2><pre><code class="jsx">const req = new XMLHttpRequest();
req.addEventListener(&#39;load&#39;, function() {
  console.log(&#39;請求成功!&#39;);
  const data = JSON.parse(this.responseText);
  for (let planet of data.results) {
    console.log(planet.name); // 列出星球名稱
  }
});

req.addEventListener(&#39;error&#39;, () =&gt; {
  console.log(&#39;錯誤&#39;);
});

req.open(&#39;GET&#39;, &#39;https://swapi.dev/api/planets/&#39;)
req.send();
console.log(&#39;request send&#39;)</code></pre>
<p><strong>Planet Request 結果</strong>：第一筆資料</p>
<pre><code class="json">GET /api/planets/
HTTP 200 OK
Content-Type: application/json
Vary: Accept
Allow: GET, HEAD, OPTIONS

{
    &quot;count&quot;: 60, 
    &quot;next&quot;: &quot;http://swapi.dev/api/planets/?page=2&quot;, 
    &quot;previous&quot;: null, 
    &quot;results&quot;: [
        {
            &quot;name&quot;: &quot;Tatooine&quot;, 
            &quot;rotation_period&quot;: &quot;23&quot;, 
            &quot;orbital_period&quot;: &quot;304&quot;, 
            &quot;diameter&quot;: &quot;10465&quot;, 
            &quot;climate&quot;: &quot;arid&quot;, 
            &quot;gravity&quot;: &quot;1 standard&quot;, 
            &quot;terrain&quot;: &quot;desert&quot;, 
            &quot;surface_water&quot;: &quot;1&quot;, 
            &quot;population&quot;: &quot;200000&quot;, 
            &quot;residents&quot;: [
                &quot;http://swapi.dev/api/people/1/&quot;, 
                &quot;http://swapi.dev/api/people/2/&quot;, 
                &quot;http://swapi.dev/api/people/4/&quot;, 
                &quot;http://swapi.dev/api/people/6/&quot;, 
                &quot;http://swapi.dev/api/people/7/&quot;, 
                &quot;http://swapi.dev/api/people/8/&quot;, 
                &quot;http://swapi.dev/api/people/9/&quot;, 
                &quot;http://swapi.dev/api/people/11/&quot;, 
                &quot;http://swapi.dev/api/people/43/&quot;, 
                &quot;http://swapi.dev/api/people/62/&quot;
            ], 
            &quot;films&quot;: [
                &quot;http://swapi.dev/api/films/1/&quot;, 
                &quot;http://swapi.dev/api/films/3/&quot;, 
                &quot;http://swapi.dev/api/films/4/&quot;, 
                &quot;http://swapi.dev/api/films/5/&quot;, 
                &quot;http://swapi.dev/api/films/6/&quot;
            ], 
            &quot;created&quot;: &quot;2014-12-09T13:50:49.641000Z&quot;, 
            &quot;edited&quot;: &quot;2014-12-20T20:58:18.411000Z&quot;, 
            &quot;url&quot;: &quot;http://swapi.dev/api/planets/1/&quot;
        },

...略</code></pre>
<h2 id="Chaining-XMLHttpRequest"><a href="#Chaining-XMLHttpRequest" class="headerlink" title="Chaining XMLHttpRequest"></a>Chaining XMLHttpRequest</h2><p>每一個星球下還有很多資料，例如 films，但是要取的 films 還需要發送 request 才可以取得資料。</p>
<p><strong>Films request 結果</strong></p>
<pre><code class="json">// Film Instance

GET /api/films/5/
HTTP 200 OK
Content-Type: application/json
Vary: Accept
Allow: GET, HEAD, OPTIONS

{
    &quot;title&quot;: &quot;Attack of the Clones&quot;, 
    &quot;episode_id&quot;: 2, 
    &quot;opening_crawl&quot;: &quot;There is unrest in the Galactic\r\nSenate. Several thousand solar\r\nsystems have declared their\r\nintentions to leave the Republic.\r\n\r\nThis separatist movement,\r\nunder the leadership of the\r\nmysterious Count Dooku, has\r\nmade it difficult for the limited\r\nnumber of Jedi Knights to maintain \r\npeace and order in the galaxy.\r\n\r\nSenator Amidala, the former\r\nQueen of Naboo, is returning\r\nto the Galactic Senate to vote\r\non the critical issue of creating\r\nan ARMY OF THE REPUBLIC\r\nto assist the overwhelmed\r\nJedi....&quot;, 
    &quot;director&quot;: &quot;George Lucas&quot;, 
    &quot;producer&quot;: &quot;Rick McCallum&quot;, 
    &quot;release_date&quot;: &quot;2002-05-16&quot;, 
    &quot;characters&quot;: [
        &quot;http://swapi.dev/api/people/2/&quot;, 
        &quot;http://swapi.dev/api/people/3/&quot;, 
        &quot;http://swapi.dev/api/people/6/&quot;, 
        &quot;http://swapi.dev/api/people/7/&quot;, 
        &quot;http://swapi.dev/api/people/10/&quot;, 

       .... 略</code></pre>
<p>Film 底下還有很多資料可以 request，例如人物。如果用 XMLHttpRequest 就可以一直 nested 下去沒完沒了。</p>
<h1 id="Fetch"><a href="#Fetch" class="headerlink" title="Fetch"></a>Fetch</h1><ul>
<li>ES6 原生方法</li>
<li>支援 Promises</li>
<li>不支援 IE</li>
</ul>
<h2 id="POST-Request"><a href="#POST-Request" class="headerlink" title="POST Request"></a>POST Request</h2><pre><code class="jsx">// 來發個 POST Request:

postData(&#39;http://example.com/answer&#39;, {answer: 42})
  .then(data =&gt; console.log(data)) // JSON from `response.json()` call
  .catch(error =&gt; console.error(error))

function postData(url, data) {
  // Default options are marked with *
  return fetch(url, {
    body: JSON.stringify(data), // must match &#39;Content-Type&#39; header
    cache: &#39;no-cache&#39;, // *default, no-cache, reload, force-cache, only-if-cached
    credentials: &#39;same-origin&#39;, // include, same-origin, *omit
    headers: {
      &#39;user-agent&#39;: &#39;Mozilla/4.0 MDN Example&#39;,
      &#39;content-type&#39;: &#39;application/json&#39;
    },
    method: &#39;POST&#39;, // *GET, POST, PUT, DELETE, etc.
    mode: &#39;cors&#39;, // no-cors, cors, *same-origin
    redirect: &#39;follow&#39;, // manual, *follow, error
    referrer: &#39;no-referrer&#39;, // *client, no-referrer
  })
  .then(response =&gt; response.json()) // 輸出成 json
}</code></pre>
<p><strong>HexSchool 註冊帳號範例：</strong></p>
<pre><code class="jsx">const api = &#39;https://hexschool-tutorial.herokuapp.com/api/signup&#39;;
let account = {
    email:&#39;abcdef@gmail.com&#39;,
    password: &#39;1234&#39;
  };

postData(api, account)
  .then(data =&gt; console.log(data)) // JSON from `response.json()` call
  .catch(error =&gt; console.error(error))

function postData(url, data) {
  return fetch(url, {
    body: JSON.stringify(data),
    headers: {
      &#39;content-type&#39;: &#39;application/json&#39;
    },
    method: &#39;POST&#39;,
  })
  .then(response =&gt; response.json()) // 輸出成 json
}

// {success: false, result: {…}, message: &quot;此帳號已被使用&quot;}</code></pre>
<h2 id="GET-Request"><a href="#GET-Request" class="headerlink" title="GET Request"></a>GET Request</h2><pre><code class="jsx">const myReq = fetch(&#39;http://example.com/movies.json&#39;)
  .then(function(response) {
    return response.json();
  })
  .then(function(myJson) {
    console.log(myJson);
  });</code></pre>
<p>範例：改寫 XMLHttpRequest 例子</p>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (response.status !== 202) {
      console.log(&#39;發生錯誤：&#39;, response.status);
      return;
    }
    response.json().then ( data =&gt; {
      for (let planet of data.results) {
        console.log(planet.name);
      }
    })
  })
  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Error: &#39;, err);
  })</code></pre>
<blockquote>
<p>fetch() 回傳的 promise 物件, resolve 和 reject 的使用方式有差異, 當遇到 HTTP Status <code>404</code>, <code>500</code> 時會使用 resolve 但<em>會將 status 的值從 ok 變為 false</em>， reject 只有在網路發生錯誤或是任何會中斷網路請求時才會使用。 — MDN web docs</p>
</blockquote>
<p>除了上方的方式，也可以利用下方的 catch error，即是把錯誤丟給他</p>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planetsss/&#39;) // 網址錯誤
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (response.status !== 202) { // 這邊寫成 if (!response.ok) ** not ok ** 也可以
      throw new Error(`Status: ${response.status}`);
            return;
    }
    response.json().then ( data =&gt; {
      for (let planet of data.results) {
        console.log(planet.name);
      }
    })
  })
  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<p>錯誤跑到下方顯示了。<br><img src="https://drive.google.com/uc?export=view&id=1dK5aSjMRe4_TdzL6xya9dKoKzZSTKVhC" alt="https://drive.google.com/uc?export=view&amp;id=1dK5aSjMRe4_TdzL6xya9dKoKzZSTKVhC"></p>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })

  ////////////////////////////////
  // 從上方 response.json() 往下移，less nested
  .then ( data =&gt; {
    console.log(data);
    for (let planet of data.results) {
      console.log(planet.name);
    }
  })
  ////////////////////////////////

    .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<h2 id="Chaining-Fetch-Requests"><a href="#Chaining-Fetch-Requests" class="headerlink" title="Chaining Fetch Requests"></a>Chaining Fetch Requests</h2><pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(&#39;星球&#39;, response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })
  .then ( data =&gt; {
    //////////////////////////////
    //  request FILM
    const filmAPI = data.results[0].films[0];
    fetch(filmAPI)
      .then( response =&gt; {
        console.log(&#39;影片&#39;, response);
        if (!response.ok) {
          throw new Error(`Status: ${response.status}`);
          return;
        }
        return response.json(); // return promise
      })
      .then ( filmData =&gt; {
        console.log(&#39;filmData&#39;, filmData);
      })
      .catch( err =&gt; {
        console.log(&#39;Catch 錯誤: &#39;, err);
      })
  })
  ////////////////////////////////
  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })

  ////////////////////////////////
  // 請求 film data
  .then ( data =&gt; {
    const filmAPI = data.results[0].films[0];
    return fetch(filmAPI); // return promise
  })
  //** 這邊跟上方的 response 是做一樣的事 **//
  .then( response =&gt; {
    console.log(response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })
  .then( filmData =&gt; {
    console.log(filmData);
  })
  //**                                **//
  ////////////////////////////////

  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<p>這樣子看起來比較平整話，而且有部分重複的語法。</p>
<h1 id="AXIOS"><a href="#AXIOS" class="headerlink" title="AXIOS"></a>AXIOS</h1><ul>
<li>支援 promises</li>
<li>在瀏覽器中創建 XMLHttpRequests</li>
<li>支援IE</li>
</ul>
<h2 id="Post-Request"><a href="#Post-Request" class="headerlink" title="Post Request"></a>Post Request</h2><pre><code class="jsx">axios.post(&#39;/user&#39;, {
    firstName: &#39;Fred&#39;,
    lastName: &#39;Flintstone&#39;
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });</code></pre>
<p><strong>HexSchool 註冊帳號範例：</strong></p>
<pre><code class="jsx">const api = &#39;https://hexschool-tutorial.herokuapp.com/api/signup&#39;;
axios.post(api, {
  email:&#39;abcdefddd@gmail.com&#39;,
  password: &#39;1234&#39;
})
.then(function (response) {
  console.log(response);
})
.catch(function (error) {
  console.log(error);
});</code></pre>
<p>Reference:</p>
<p>The Modern JavaScript Bootcamp<br><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">Using Fetch — MDN web docs</a><br><a href="https://github.com/axios/axios" target="_blank" rel="noopener">AXIOS</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-15T16:45:41.000Z" itemprop="datePublished">2020-08-16</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AJAX/" rel="tag">AJAX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AXIOS/" rel="tag">AXIOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Fetch/" rel="tag">Fetch</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-44-window-location"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/14/JS-Day-44-window-location/">JS Day 44: window.location</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="取得目前的網址與參數"><a href="#取得目前的網址與參數" class="headerlink" title="取得目前的網址與參數"></a>取得目前的網址與參數</h1><h2 id="語法"><a href="#語法" class="headerlink" title="語法"></a>語法</h2><pre><code class="jsx">let locationObj = window.location;

console.log(locationObj);</code></pre>
<h2 id="屬性"><a href="#屬性" class="headerlink" title="屬性"></a>屬性</h2><p>範例網址：<a href="http://127.0.0.1:5506/44/index.html?q=%27username%27&amp;status=true#title" target="_blank" rel="noopener">http://127.0.0.1:5506/44/index.html?q=%27username%27&amp;status=true#title</a></p>
<p><img src="https://drive.google.com/uc?export=view&id=1IPhpvsOWkeGiwpO7bv9VjQpSAk-ySEU6" alt="https://drive.google.com/uc?export=view&amp;id=1IPhpvsOWkeGiwpO7bv9VjQpSAk-ySEU6"></p>
<h2 id="跳頁"><a href="#跳頁" class="headerlink" title="跳頁"></a>跳頁</h2><h3 id="回到上一頁"><a href="#回到上一頁" class="headerlink" title="回到上一頁"></a>回到上一頁</h3><pre><code class="jsx">window.history.go(-1);
history.go(-1); // 省略 window, 一樣可以動作

window.history.back(); // 另一個方法</code></pre>
<h3 id="回到下一頁"><a href="#回到下一頁" class="headerlink" title="回到下一頁"></a>回到下一頁</h3><pre><code class="jsx">window.history.go(1);

window.history.forward();</code></pre>
<h3 id="回到第-N-頁-window-history-go-arg"><a href="#回到第-N-頁-window-history-go-arg" class="headerlink" title="回到第 N 頁: window.history.go(arg)"></a>回到第 N 頁: window.history.go(arg)</h3><p>範例：</p>
<ul>
<li><a href="http://www.google.com" target="_blank" rel="noopener">www.google.com</a></li>
<li><a href="http://www.yahoo.com" target="_blank" rel="noopener">www.yahoo.com</a></li>
<li><a href="http://www.tesla.com" target="_blank" rel="noopener">www.tesla.com</a> (當前網頁)</li>
<li><a href="http://www.lego.com" target="_blank" rel="noopener">www.lego.com</a></li>
<li><a href="http://www.abc.com" target="_blank" rel="noopener">www.abc.com</a></li>
</ul>
<pre><code class="jsx">window.history.go(-2); // 參數是正數就往上 2 頁 (forward), www.google.com
window.history.go(1);  // 參數是負數就往下 1 頁 (back), www.lego.com
window.history.go(0);  // 參數是 0 則重新載入現在頁面, refresh www.testla.com</code></pre>
<h3 id="重新整理當前頁面"><a href="#重新整理當前頁面" class="headerlink" title="重新整理當前頁面"></a>重新整理當前頁面</h3><p>除了上面提到的 <code>window.history.go(0)</code> 還有 <code>reload()</code> 方法可以用:</p>
<pre><code class="jsx">window.location.reload();

window.location.reload(true); 
// window.location.reload(forcedReload) 裡面的 forceReload 是 boolean</code></pre>
<h3 id="頁面跳轉"><a href="#頁面跳轉" class="headerlink" title="頁面跳轉"></a>頁面跳轉</h3><pre><code class="jsx">// window 皆可省略
window.location = &quot;http://www.lego.com&quot;; // location property
window.location.href = &quot;http://www.lego.com&quot;; // href property
window.location.assign(&#39;http://www.lego.com&#39;); // assign method
window.location.replace(&#39;http://www.lego.com&#39;); // replace method</code></pre>
<blockquote>
<p>replace 是置換掉現在的document，不會留下被置換掉的頁面紀錄，所以當你按下”上一頁”時回到的其實是你”上上個”看到的頁面 (reference-1)</p>
</blockquote>
<p>Reference:<br><a href="http://cat-son.blogspot.com/2012/11/javascript-windowlocation.html#sthash.UeM0Vl5j.ncVtroJF.dpbs" target="_blank" rel="noopener">JavaScript 筆記 - window.location 類別</a><br><a href="https://ithelp.ithome.com.tw/articles/10190061" target="_blank" rel="noopener">JavaScript 刷新頁面的幾種方法</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Window/location" target="_blank" rel="noopener">window.location</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-13T16:04:39.000Z" itemprop="datePublished">2020-08-14</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Location/" rel="tag">Location</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-42-Date-方法＆日期格式"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/08/JS-Day-42-Date-%E6%96%B9%E6%B3%95%EF%BC%86%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F/">JS Day 42: Date() 方法＆日期格式</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="Getter"><a href="#Getter" class="headerlink" title="Getter"></a>Getter</h1><p>取得時間格式</p>
<pre><code class="jsx">const  today = new Date(); // Date Sat Aug 08 2020 00:28:32 GMT+0800 (Taipei Standard Time)

// 回傳年份
today.getFullYear(); // 2020

// 回傳月份 (0-11) ** 從 0 開始
today.getMonth(); // 7

// 回傳日期（1-31)
today.getDate(); // 8

// 回傳小時（0-23）
today.getHours(); // 0

// 回傳分鐘（0-59）
today.getMinutes(); // 28

// 回傳日期（0-6）** 從 0 開始
today.getDay(); // 6</code></pre>
<h1 id="Setter"><a href="#Setter" class="headerlink" title="Setter"></a>Setter</h1><p>設定時間格式</p>
<pre><code class="jsx">// 設定月份中的日期
today.setDate();

const bday = new Date(&#39;August 08, 2020 11:26:15&#39;);
event.setDate(05); // 設定程 5 號
// =&gt; 1596597975000
console.log(event); // Date Wed Aug 05 2020 11:26:15 GMT+0800 (Taipei Standard Time)

// 設定完整年份
today.setFullYear();

// 設定月份
today.setMonth();

// 設定小時
today.setHours();

// 設定分鐘
today.setMinutes();

// 設定秒數
today.setSeconds();</code></pre>
<h1 id="時間格式"><a href="#時間格式" class="headerlink" title="時間格式"></a>時間格式</h1><p>設定時間格式 例：2020/08/05</p>
<pre><code class="jsx">const setDate = new Date(2020, 07, 05);
let df = (date) =&gt; {

  const year = date.getFullYear();
  const month = date.getMonth()+1;
  const day = date.getDate();

  return [year, month, day].join(&quot;/&quot;);
};

console.log(df(setDate));</code></pre>
<p>不過這樣寫不夠靈活。如果遇到格式是 2020-8-5 或是 2020-08-05 整式函式都要重寫。</p>
<pre><code class="jsx">Date.prototype.dateFormat = function(format){
  var obj = {
        // 這邊的 this 會指向 Date()
    &quot;y+&quot;: this.getFullYear(),                //年
    &quot;M+&quot;: this.getMonth()+1,                 //月份
    &quot;d+&quot;: this.getDate(),                    //日
    &quot;h+&quot;: this.getHours(),                   //小時
    &quot;m+&quot;: this.getMinutes(),                 //分
    &quot;s+&quot;: this.getSeconds(),                 //秒
    &quot;S&quot; : this.getMilliseconds()             //毫秒
  };
    // 物件的 key 代表 regular expression 的規則
  // ＋號：匹配前一字元 1 至多次，等同於 {1,}。
    // 例如：/a+/ 匹配「candy」中的 a，以及所有「caaaaaaandy」中的 a。

  for (let key in obj) {
    // create a regular expression
        const regex = new RegExp(`(${key})`); // 這邊的 key 需要用括號包住( )，參考 capturing parentheses
                                                // 括號會記住此次的匹配，之後用以用 RegExp.$1..$n 呼叫

    if (regex.test(format)) {
      if (regex == &#39;/(M+)/&#39; || regex == &#39;/(d+)/&#39;) {
        format = format.replace(
                    regex, (RegExp.$1.length &lt; 2 ? obj[key] : (&quot;00&quot; + obj[key]).substring(1,obj[key].length))
                    // RegExp.$1 會回傳 M 跟 d 的長度
                    // 如果是 MM 就會組合成 00+月 = 008 再去刪掉最前方的0 也就是 obj[key].length
                );
      } else {
        format = format.replace(regex, obj[key]);
      }
    }
  }
  console.log(format);
  return format;
}

let ccc = new Date().dateFormat(&#39;yyyy/MM/d&#39;); // 2020/08/8
let aaa = new Date().dateFormat(&#39;yyyy-M-dd&#39;); // 2020-8-08
let bbb = new Date().dateFormat(&#39;yyyy/MM/dd&#39;); // 2020/08/08</code></pre>
<p>Reference:<br><a href="https://www.runoob.com/js/js-obj-date.html" target="_blank" rel="noopener">JavaScript Date (日期) 對象</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test" target="_blank" rel="noopener">RegExp.prototype.test() – MDN web docs</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Regular_Expressions#special-plus" target="_blank" rel="noopener">Regular Expression: ＋ (plus sign) — MDN web docs</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Regular_Expressions#special-capturing-parentheses" target="_blank" rel="noopener">Regular Expression: Capturing Parentheses — MDN web docs</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-08T05:15:12.000Z" itemprop="datePublished">2020-08-08</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Date/" rel="tag">Date</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-41-Date-型別"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/06/JS-Day-41-Date-%E5%9E%8B%E5%88%A5/">JS Day 41: Date() 型別</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="Date-物件"><a href="#Date-物件" class="headerlink" title="Date 物件"></a>Date 物件</h1><h2 id="建立-Date-物件的-4-種方法"><a href="#建立-Date-物件的-4-種方法" class="headerlink" title="建立 Date 物件的 4 種方法"></a>建立 Date 物件的 4 種方法</h2><pre><code class="jsx">// 1.
new Date();
// 2.
new Date(value);
// 3.
new Date(dateString);
// 4.
new Date(year, month[, day[, hour[, minutes[, seconds[, milliseconds]]]]]);</code></pre>
<h3 id="1-new-Date"><a href="#1-new-Date" class="headerlink" title="1. new Date()"></a>1. new Date()</h3><pre><code class="jsx">var current = new Date();
// Thu Aug 06 2020 20:02:42 GMT+0800 (Taipei Standard Time)

var current = Date();
// &quot;Thu Aug 06 2020 20:02:42 GMT+0800 (Taipei Standard Time)&quot;</code></pre>
<p>回傳當下日期時間、時間。如果少了 <code>new</code> 則是會回傳一個當下時間的字串。 </p>
<h3 id="2-new-Date-value"><a href="#2-new-Date-value" class="headerlink" title="2. new Date(value)"></a>2. new Date(value)</h3><pre><code class="jsx"># 取得現在時間（毫秒）
const dateNow = Date.now(); // 1596715024359
const getTime = new Date().getTime(); // 1596715024359
const getValue = new Date().valueOf(); // 1596715024359

new Date(dateNow); // Thu Aug 06 2020 19:57:04 GMT+0800 (Taipei Standard Time)
new Date(getTime); // Thu Aug 06 2020 19:57:04 GMT+0800 (Taipei Standard Time)
new Date(getValue);

new Date(1596715024359);
// Thu Aug 06 2020 19:57:04 GMT+0800 (Taipei Standard Time)
// 只要傳入參數是 timestamp，new Date() 會轉換成我們可以字串，我們可閱讀的格式</code></pre>
<p><code>Date.now()</code> 回傳對應於當下時間的數值 - 1970/01/01 00:00:00 (UTC) 到當下的毫秒數。</p>
<p><code>new Date().getTime()</code> 取得格林威治標準時間 1970/01/01 00:00:00 (UTC) 到現在的時間(毫秒)。</p>
<p><code>new Date().valueOf()</code> 取得 <code>Date</code> 的原始值。</p>
<h3 id="3-new-Date-dataString"><a href="#3-new-Date-dataString" class="headerlink" title="3. new Date(dataString)"></a>3. new Date(dataString)</h3><pre><code class="jsx">var today = new Date(&#39;August 06, 2020 20:42:15&#39;);
// Thu Aug 06 2020 20:42:15 GMT+0800 (Taipei Standard Time)
var today = new Date(&#39;2020-08-06T20:42:15&#39;);
// Thu Aug 06 2020 20:42:15 GMT+0800 (Taipei Standard Time)

var today = new Date(2020, 08, 06);
// Sun Sep 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)
// 雖然 dateString 是 2002, 08, 06 (星期四)，但回傳的卻是 星期日 九月六日 🤔
// 啊，原來忘記用 quotation 包住。誤會一場。

var today = new Date(&#39;2020, 08, 06&#39;);
// Thu Aug 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)</code></pre>
<p>瀏覽器間解析日期字串的方式有所差異，MDN 不建議用此方法建立日期物件。</p>
<pre><code class="jsx">new Date(&#39;2020-08-06&#39;);
// Thu Aug 06 2020 08:00:00 GMT+0800 (Taipei Standard Time)</code></pre>
<p>上方範例回傳<code>08:00:00</code> ，Chrome 瀏覽器會解讀成 格林威治標準時間(GMT) 的日期格式，而本地時間是 GMT+8 所以時間顯示會再加上 8 小時。</p>
<p>下方範例回傳 <code>00:00:00</code> ，顯示為本地時間，上下兩者相差了 8 小時。如果瀏覽器位於不同時區打開，顯示的本地時間不一定相同。</p>
<pre><code class="jsx">new Date(&#39;2020-8-06&#39;);
// Thu Aug 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)

new Date(&#39;2020/08/06&#39;);
// Thu Aug 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)

new Date(&#39;2020/8/06&#39;);
// Thu Aug 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)

new Date(&#39;06 August, 2020&#39;);
// Thu Aug 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)</code></pre>
<h3 id="4-new-Date-year-month-day-hour-minutes-seconds-milliseconds"><a href="#4-new-Date-year-month-day-hour-minutes-seconds-milliseconds" class="headerlink" title="4. new Date(year, month[, day[, hour[, minutes[, seconds[, milliseconds]]]]]);"></a>4. new Date(year, month[, day[, hour[, minutes[, seconds[, milliseconds]]]]]);</h3><p>這邊的參數傳入不是字串，不需要用 quotation ，但是傳入的數字有其規範。</p>
<p><strong><code>year</code></strong></p>
<p>表示年份的整數。當數值落在 0 到 99 之間，表示 1900 到 1999 之間的年份。參考<a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Date#Two_digit_years_map_to_1900_-_1999" target="_blank" rel="noopener">下面的範例</a>.</p>
<p><strong><code>month</code></strong></p>
<p>表示月份的整數。由 0 開始（一月）到 11 （十二月）。</p>
<p><strong><code>day</code></strong></p>
<p>選用。表示月份中第幾天的整數值。</p>
<p><strong><code>hour</code></strong></p>
<p>選用。表示小時數的整數值。</p>
<p><strong><code>minute</code></strong></p>
<p>選用。表示分鐘數的整數值。</p>
<p><strong><code>second</code></strong></p>
<p>選用。表示秒數的整數值。</p>
<p><strong><code>millisecond</code></strong></p>
<p>選用。表示毫秒數的整數值。</p>
<p>– 擷取自 <a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener">MDN web doc</a></p>
<pre><code class="jsx">var today = new Date(2020, 08, 06);
// Sun Sep 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)

// month 的起始值是 0(一月)，08 則是九月，所以整個回傳的日期是 九月六日，二零二零年。</code></pre>
<pre><code class="jsx">// new Date(year, month[, day[, hour[, minutes[, seconds[, milliseconds]]]]]);
// 把上面這個方法看成下方這樣對我來說比較好理解
// new Date(year, month, day, hour, minutes, seconds, milliseconds)

new Date(98);
// Thu Jan 01 1970 08:00:00 GMT+0800 (Taipei Standard Time)
new Date(2020); 
// Thu Jan 01 1970 08:00:02 GMT+0800 (Taipei Standard Time)</code></pre>
<p>這部分有點不解！傳入一個參數回傳都是從 1970 開始。</p>
<pre><code class="jsx">new Date(2020, 07); // month 是從 0 開始, 07 等於八月
// Sat Aug 01 2020 00:00:00 GMT+0800 (Taipei Standard Time)
// 參數只有年、月，所以日期會被設為 1

new Date(2020, 07, 06);
// Thu Aug 06 2020 00:00:00 GMT+0800 (Taipei Standard Time)</code></pre>
<p>規則：</p>
<ul>
<li>如果沒有傳入任務參數到建構子，會依系統設定建立出代表當下時間的 Date 物件。</li>
<li>如果傳入至少兩個參數，缺少日期的話會設為 1，其它參數則會被設定為 0。</li>
</ul>
<h1 id="日期字串格式規範"><a href="#日期字串格式規範" class="headerlink" title="日期字串格式規範"></a>日期字串格式規範</h1><p><a href="http://www.ecma-international.org/ecma-262/5.1/" target="_blank" rel="noopener">ECMA-262 Edition 5.1</a> 對 Date Time String Format 做出個規範：</p>
<pre><code class="jsx">// ISO 8601 Extended Format
YYYY-MM-DDTHH:mm:ss.SSSZ</code></pre>
<pre><code class="jsx">// 即使只有年份也可以
new Date(&#39;2020&#39;);
// Wed Jan 01 2020 08:00:00 GMT+0800 (Taipei Standard Time)
new Date(&#39;2020-08&#39;);
// Sat Aug 01 2020 08:00:00 GMT+0800 (Taipei Standard Time)
new Date(&#39;2020-08-06&#39;);
// Thu Aug 06 2020 08:00:00 GMT+0800 (Taipei Standard Time)</code></pre>
<p>如果要傳入時間(時：分)，日期(DD) 的部分則不能省略，秒(ss) 則可以省略。。</p>
<p><strong><em>YYYY-MM-DD<code>T</code>HH:mm:ss.SSSZ</em></strong> 日期跟時間中間會用英文字母 <code>T</code> 來做分隔。</p>
<p><strong><em>YYYY-MM-DDTHH:mm:ss.SSS<code>Z</code></em></strong> 最後面的 <code>Z</code> 代表時區，它可以被省略。</p>
<pre><code class="jsx">new Date(&#39;2020-08-06T20:55&#39;);
// Thu Aug 06 2020 20:55:00 GMT+0800 (Taipei Standard Time)
new Date(&#39;2020-08-06T20:55:33&#39;);
// Thu Aug 06 2020 20:55:33 GMT+0800 (Taipei Standard Time)</code></pre>
<p>Reference:<br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener">Date - MDN web docs</a><br><a href="https://blog.miniasp.com/post/2016/09/25/JavaScript-Date-usage-in-details" target="_blank" rel="noopener">前端工程研究：關於 JavaScript 中 Date 型別的常見地雷與建議作法 — The Will Will Web</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-06T15:36:30.000Z" itemprop="datePublished">2020-08-06</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Date/" rel="tag">Date</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-39-Arrow-Function-this"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/02/JS-Day-39-Arrow-Function-this/">JS Day 39: Arrow Function &amp; this</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="箭頭函式-Arrow-Function"><a href="#箭頭函式-Arrow-Function" class="headerlink" title="箭頭函式 Arrow Function"></a>箭頭函式 Arrow Function</h1><h2 id="如何寫箭頭函式"><a href="#如何寫箭頭函式" class="headerlink" title="如何寫箭頭函式"></a>如何寫箭頭函式</h2><p>Function 範例：</p>
<pre><code class="jsx">function getProductName() {
    console.log(&#39;MacBook Pro&#39;);
};
getProductName(); // MacBook Pro</code></pre>
<p>用 箭頭函式 Arrow Function 改寫：</p>
<pre><code class="jsx">let getProductName = () =&gt; {
    console.log(&#39;MacBook Pro&#39;);    
};
getProductName(); // MacBook Pro</code></pre>
<p>如果只有一個參數傳遞進來，<code>( )</code> 號可以省略。<em>沒有任何參數時，<code>( )</code> 是不可以省略的。</em></p>
<pre><code class="jsx">let sayHello = name =&gt; {
    console.log(`Hello ${name}`);
};
sayHello(&#39;George&#39;); // Hello George</code></pre>
<p>大於一個參數傳遞進來 <code>( )</code> 需要保留</p>
<pre><code class="jsx">let multiply = (num1, num2) =&gt; {
    return num1*num2;
};
console.log( multiply(2,3) ); // 6</code></pre>
<p>上面這個例子可以再精簡。</p>
<p>如果函式本身不做太複雜的運算，單純要 return 一個值的話， <code>{ }</code> 與 <code>return</code> 都可以省略。</p>
<pre><code class="jsx">let multiply = (num1, num2) =&gt; return num1*num2; // 只剩一行
console.log( multiply(2,3) ); // 6</code></pre>
<h2 id="箭頭函式使用例子"><a href="#箭頭函式使用例子" class="headerlink" title="箭頭函式使用例子"></a>箭頭函式使用例子</h2><p>範例1 - addEventListener: </p>
<pre><code class="jsx">button.addEventListener(&#39;click&#39;, function() {
    alert(&#39;Do Not Click&#39;);
});</code></pre>
<p>範例1 改寫一：</p>
<pre><code class="jsx">button.addEventListener(&#39;click&#39;, () =&gt; {
    alert(&#39;Do Not Click&#39;);
});</code></pre>
<p>範例1 改寫二：</p>
<pre><code class="jsx">let showAlert = () =&gt; {
    alert(&#39;Do Not Click&#39;);
};

button.addEventListener(&#39;click&#39;, showAlert);</code></pre>
<p>範例2 - map:</p>
<pre><code class="jsx">const products = [
    {brand: &#39;Apple&#39;, name: &#39;iPhone 11 Pro&#39;, price: 800},
    {brand: &#39;Samsung&#39;, name: &#39;Galaxy S8&#39;, price: 788},
    {brand: &#39;Google&#39;, name: &#39;Pixel 4&#39;, price: 588}
];

let prices = products.map(function(item) {
    return item.price;
});

console.log(prices);</code></pre>
<p>範例2 改寫:</p>
<pre><code class="jsx">const products = [
    {brand: &#39;Apple&#39;, name: &#39;iPhone 11 Pro&#39;, price: 800},
    {brand: &#39;Samsung&#39;, name: &#39;Galaxy S8&#39;, price: 788},
    {brand: &#39;Google&#39;, name: &#39;Pixel 4&#39;, price: 588}
];

let prices = products.map( item =&gt; item.price);

console.log(prices);</code></pre>
<h2 id="What-is-‘this’"><a href="#What-is-‘this’" class="headerlink" title="What is ‘this’?"></a>What is ‘this’?</h2><pre><code class="jsx">console.log(this); // this 指向 Window</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1M7be_drDFYZ31wkS9NkdHSbG_V8sFHTL" alt=""></p>
<pre><code class="jsx">var a = &#39;A&#39;;
console.log(a); // A
console.log(this.a); // A
console.log(window.a); // A
console.log( this.a === window.a ); // true</code></pre>
<p>目前 this 會變成 window。</p>
<pre><code class="jsx">function greeting() {
    console.log(this);
};
greeting(); // window

////

var name = &#39;Gary&#39;;
function greeting(name) {
  console.log(this.name);
};
greeting(&#39;hello&#39;); // Gary</code></pre>
<p>當下 this 還是 window 而不是 greeting() 這個函式。</p>
<blockquote>
<p><code>this</code> 代表的是 function 執行時所屬的物件，而不是 function 本身。 — Kuro</p>
</blockquote>
<pre><code class="jsx">let getUsername = function() {
  console.log(this); // 印出 this
  return this.name;
};

const user1 = {
  id: 1,
  name: &#39;William&#39;,
  getUsername
};

const user2 = {
  id: 2,
  name: &#39;Alan&#39;,
  getUsername
};

console.log( user1.getUsername() ); // William
console.log( user2.getUsername() ); // Alan</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1aPP-t1q7eK9Av5ZfJJ4CXPDU0jRAaexZ" alt=""></p>
<p>另一個範例：</p>
<pre><code class="jsx">var obj = {
  func: function greeting(){
    return console.log(this);
  }
};

obj.func(); // Object { func: greeting() }</code></pre>
<blockquote>
<p>一但脫離了物件，<code>this</code> 的值就沒什麼意義，在沒意義的情況底下就會有個預設值，而預設值也很好記，嚴格模式就是<code>undefined</code>，非嚴格模式底下就是<code>全域物件</code>。 — Huli</p>
</blockquote>
<pre><code class="jsx">console.log(this); // 非嚴格模式下就是全域物件 - window
var func = function (){
  &quot;use strict&quot; // 嚴格模式
  console.log(this); // undefined
};
func();</code></pre>
<h2 id="箭頭函式下的-this"><a href="#箭頭函式下的-this" class="headerlink" title="箭頭函式下的 this"></a>箭頭函式下的 this</h2><p>將上面的範例改成 arrow function</p>
<pre><code class="jsx">let getUsername = () =&gt; {
    console.log(this); 
  return this.name;
};

const user1 = {
  id: 1,
  name: &#39;William&#39;,
  getUsername
};

const user2 = {
  id: 2,
  name: &#39;Alan&#39;,
  getUsername
};
console.log( user1.getUsername() ); // &#39;&#39; (empty string)
console.log( user2.getUsername() ); // &#39;&#39; (empty string)</code></pre>
<p>this 指向全域物件 window<br><img src="https://drive.google.com/uc?export=view&id=1ySPURsNM59YglIJNeImPFBUR1dRseF6W" alt=""></p>
<p>在箭頭函式下，this 會被強制綁定到其定義時所在的物件，上面的範例則是 window。</p>
<h1 id="Arrow-Function-in-Vue-js"><a href="#Arrow-Function-in-Vue-js" class="headerlink" title="Arrow Function in Vue.js"></a>Arrow Function in Vue.js</h1><pre><code class="javascript">  var app = new Vue({
    el: &#39;#app&#39;,
    data: {
      text: &#39;&#39;,
      newText: &#39;&#39;
    },
    methods: {
      reverseText: () =&gt; {
        console.log(this);
        console.log(app);
        this.newText = this.text.split(&#39;&#39;).reverse().join(&#39;&#39;);
      }
    },
  });</code></pre>
<p>在 Vue.js 裡的 arrow function，<code>this</code> 也是指向 <code>window</code>。</p>
<pre><code class="javascript">  var app = new Vue({
    el: &#39;#app&#39;,
    data: {
      text: &#39;&#39;,
      newText: &#39;&#39;
    },
    methods: {
      reverseText: function() {
        console.log(this);
        console.log(app);
        this.newText = this.text.split(&#39;&#39;).reverse().join(&#39;&#39;);
      }
    }
  });</code></pre>
<p>一般 function 的 <code>this</code> 是指向 Vue instance, 在這個範例也就是 <code>app</code>.</p>
<p>Reference:<br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener">Arrow Function - MDN web docs</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener">This - MDN web docs</a><br><a href="https://pjchender.blogspot.com/2017/01/es6-arrow-function.html" target="_blank" rel="noopener">[筆記] JavaScript ES6 中的箭頭函數（arrow function）及對 this 的影響 - PJCHENder</a><br><a href="https://pjchender.blogspot.com/2016/03/javascriptthisbug.html" target="_blank" rel="noopener">[筆記] 談談 JavaScript 中的 “this” 和它的問提 - PJCHENder</a><br><a href="https://es6.ruanyifeng.com/?search=arrow&x=0&y=0#docs/function#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0" target="_blank" rel="noopener">ECMAScript 6 入門</a><br><a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank" rel="noopener">淺談 JavaScript 頭號難題 this：絕對不完整，但保證好懂 - TechBridge</a><br><a href="https://wcc723.github.io/javascript/2017/12/12/javascript-this/" target="_blank" rel="noopener">鐵人賽：JavaScript 的 this 到底是誰？ - 卡斯伯</a><br><a href="https://kuro.tw/posts/2017/10/12/What-is-THIS-in-JavaScript-上/" target="_blank" rel="noopener">What’s THIS in JavaScript? [上] [中] [下] - Kuro’s Blog</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-02T08:30:16.000Z" itemprop="datePublished">2020-08-02</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/ArrowFunction/" rel="tag">ArrowFunction</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-37-var-let-and-const-part-2-hoisting"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/07/31/JS-Day-37-var-let-and-const-part-2-hoisting/">JS Day 37: Var, Let and Const, part 2 - Hoisting</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="Hoisting-提升"><a href="#Hoisting-提升" class="headerlink" title="Hoisting 提升"></a>Hoisting 提升</h1><h2 id="Var-Hoisting-變數提升"><a href="#Var-Hoisting-變數提升" class="headerlink" title="Var Hoisting 變數提升"></a>Var Hoisting 變數提升</h2><pre><code class="jsx">console.log(a); // undefined
var a = &#39;A&#39;;

// ---- 分隔線 ----

// 實際上這段程式碼對編譯器來說是長這樣
var a; // 只有宣告 a 這個變數
console.log(a); // 只有被宣告，但沒有賦予值，自然是 undefined
a = &#39;A&#39;; // assignment 不會被提升
</code></pre>
<p>把上面的例子拆分，這樣子比較好理解。</p>
<pre><code class="jsx">var a; // 有宣告，但沒有賦予任何值
console.log(a);  // a 會是 undefined</code></pre>
<p>使用 var 跟 let 的結果：</p>
<pre><code class="jsx">console.log(a); // Undefined
var a = &#39;A&#39;;

console.log(b);  // ReferenceError: b is not defined
let b = &#39;B&#39;; 

console.log(c);  // ReferenceError: c is not defined
const c = &#39;C&#39;; </code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1ut6WFtMB7-4MUNbgfCZyn24ZzzjFdBxG" alt="https://drive.google.com/uc?export=view&amp;id=1ut6WFtMB7-4MUNbgfCZyn24ZzzjFdBxG"></p>
<p><strong>undefined =/= not defined</strong><br>undefined 在記憶體已經有準備空間給它<br>not defined 沒有被定義</p>
<p>var 的特性，只要繼替體有準備位置，使用 <code>var</code> 會出現 hoisting (undefined)，反之使用 <code>let</code>&amp; <code>const</code> 則不會出現 hoisting（not defined)，因為變數 <code>b</code> 之前不存在，所以會出錯。</p>
<h2 id="提升-＆-函式-Hoisting-amp-Functions"><a href="#提升-＆-函式-Hoisting-amp-Functions" class="headerlink" title="提升 ＆ 函式 (Hoisting &amp; Functions)"></a>提升 ＆ 函式 (Hoisting &amp; Functions)</h2><h3 id="函式運算式-Function-Declaration"><a href="#函式運算式-Function-Declaration" class="headerlink" title="函式運算式 (Function Declaration)"></a>函式運算式 (Function Declaration)</h3><h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>延續上方，<code>console.log(a)</code> 會是 <code>undefined</code></p>
<pre><code class="jsx">alpha(); // &#39;Alpha calling...&#39;, function 會被提升
console.log(a); // undefined, var a 會被提升，但 assignment 不會
var a = &#39;A&#39;;

function alpha() {
    console.log(&#39;Alpha calling...&#39;);
};

// output
// Alpha calling...
// undefined</code></pre>
<pre><code class="jsx">console.log(a); // function a()
var a;
function a() {
    console.log(&#39;say a word&#39;);
};</code></pre>
<p>為何不是 <code>undefined</code>? 因為 function 被提升了。</p>
<p>類似範例：</p>
<pre><code class="jsx">aTest(); // 我被提升了
function aTest() {
    console.log(&#39;我被提升了&#39;);
};</code></pre>
<p>範例1：</p>
<pre><code class="jsx">var a = 0;

function a() {
    return 1;
};

console.log(typeof a); // number</code></pre>
<p>可以這樣解讀範例1：</p>
<pre><code class="jsx">var a; // 提升

function a() {
    return 1;
};

// 初始化, 不會被提升
a = 0

console.log(typeof a); // number</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=12oaRQd-9WaquBjqIhyNXLlAniBSu1ohq" alt="https://drive.google.com/uc?export=view&amp;id=12oaRQd-9WaquBjqIhyNXLlAniBSu1ohq"></p>
<p>這樣子寫 console 輸出也是 number。</p>
<p>範例2：</p>
<pre><code class="jsx">// var
var a;
function a() {
  return 1;
};

console.log(typeof a); // function

// let
let a;
function a() {
  return 1;
};

console.log(typeof a); // 重複宣告 let a
                                             // SyntaxError: redeclaration of let a</code></pre>
<h3 id="函式陳述式-Function-Expression"><a href="#函式陳述式-Function-Expression" class="headerlink" title="函式陳述式 (Function Expression)"></a>函式陳述式 (Function Expression)</h3><pre><code class="jsx">console.log(typeof aTest); // undefined
aTest(); // function 沒有被提升，出錯了。
         // TypeError: aTest is not a function
var aTest = function hoist() {
    console.log(&#39;我被提升了&#39;);
};
</code></pre>
<p>var aTest 有被提升，但是 function 沒有，aTest 沒有被 initialize，所以是 undefined。</p>
<pre><code class="jsx">//
// var
aTest(); // function 沒有被提升，出錯了。
         // TypeError: aTest is not a function
var aTest = function() {
    console.log(&#39;我被提升了&#39;);
};

//
// let
aTest(); // function 沒有被提升，出錯了。
         // ReferenceError: can&#39;t access lexical declaration &#39;aTest&#39; before initialization
let aTest = function() {
    console.log(&#39;我被提升了&#39;);
};

//
// const
aTest(); // function 沒有被提升，出錯了。
         // ReferenceError: can&#39;t access lexical declaration &#39;aTest&#39; before initialization
const aTest = function() {
    console.log(&#39;我被提升了&#39;);
};</code></pre>
<p>一樣都是 function，怎麼一個有被提升一個沒有呢？</p>
<p>用 <code>let</code> 或 <code>const</code> 宣告 function expression 都會出現很明確的錯誤：ReferenceError: can’t access lexical declaration ‘findProd’ before initialization （暫時性死區 Temporal Dead Zone, TDZ）。</p>
<ul>
<li>函式提升 &gt; 變數提升</li>
<li>assignment (<code>=</code>) 不會被提升</li>
<li>Function Expression 不會被提升，function declaration 則會</li>
</ul>
<p>Reference:<br><a href="https://es6.ruanyifeng.com/#docs/let" target="_blank" rel="noopener">ECMAScript 6 入門: let 和 const 命令</a><br><a href="https://ithelp.ithome.com.tw/articles/10191549" target="_blank" rel="noopener">重新認識 JavaScript: Day 10 函式 Functions 的基本概念</a><br><a href="https://blog.techbridge.cc/2018/11/10/javascript-hoisting/" target="_blank" rel="noopener">我知道你懂 hoisting，可是你了解到多深？</a><br><a href="https://scotch.io/tutorials/understanding-hoisting-in-javascript#toc-hoisting-functions" target="_blank" rel="noopener">Hoisting in JavaScript</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-07-31T15:13:55.000Z" itemprop="datePublished">2020-07-31</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Const/" rel="tag">Const</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Hoisting/" rel="tag">Hoisting</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-37-var-let-and-const"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/07/30/JS-Day-37-var-let-and-const/">JS Day 37: Var, Let and Const</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <ul>
<li>var：宣告變數</li>
<li>let ：宣告只作用在當前區塊的變數</li>
<li>const：宣告常數</li>
</ul>
<h1 id="var-amp-let"><a href="#var-amp-let" class="headerlink" title="var &amp; let"></a>var &amp; let</h1><pre><code class="jsx">{
  var a = &#39;A&#39;;
  let b = &#39;B&#39;;
    const c = &#39;C&#39;;
}
console.log(&#39;var a: &#39; + a);
console.log(&#39;let b: &#39; + b);
console.log(&#39;let c: &#39; + c);

// output
// &quot;var a: A&quot;
// ReferenceError: b is not defined
// ReferenceError: c is not defined</code></pre>
<p>用 <code>var</code> 來宣告一個全域變數，<code>let</code> &amp; <code>const</code> 的作用域僅 <strong><em>scope</em></strong> 限於 <code>{ ... }</code> 區塊。</p>
<h2 id="作用域-Scope"><a href="#作用域-Scope" class="headerlink" title="作用域 (Scope)"></a>作用域 (Scope)</h2><ul>
<li>var: function  <code>{ }</code></li>
<li>let: block</li>
</ul>
<pre><code class="jsx">// var
function varTest() {
  var x = 1;
  {
    var x = 2; // 覆蓋掉上方的 1
    console.log(x);  // 2
  }
  console.log(x);  // 2
}

// let
function letTest() {
  let x = 1;
  {
    let x = 2;  // 跟上方的 let x = 1; 不相干
    console.log(x);  // 2
  }
  console.log(x);  // 1
}</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1lVBObZhXOIp6B8atoFpXzhghVyKPmHSu" alt=""></p>
<blockquote>
<p>var 作用範圍是「整個」function。</p>
</blockquote>
<h3 id="for-loop-作用域"><a href="#for-loop-作用域" class="headerlink" title="for loop 作用域"></a>for loop 作用域</h3><pre><code class="jsx">for (let i = 0; i &lt; 5; i++) {
    console.log(i);
};

console.log(i);

// output
// 1
// 2
// 3
// 4
// ReferenceError: i is not defined</code></pre>
<p><code>let i</code> 在 for loop 裡頭才有計次效用，在 <code>{ ... }</code> 外呼叫會得到 ReferenceError 錯誤， <code>i</code> 並沒有被宣告。</p>
<pre><code class="jsx">for (var i = 0; i &lt; 5; i++) {
  // var 全域
    console.log(i);
};

console.log(i);

// output
// --- LOOP 開始
// 0
// 1
// 2
// 3
// 4
// --- LOOP 結束
// 5   { ... } 外面呼叫 i 得到的結果</code></pre>
<p>一樣意思, 使用 <code>var</code> 的話 setTimeout 取到的 <code>i</code> 是 <code>window.i</code> 的 <strong>i = 10</strong></p>
<pre><code class="javascript">for (var i = 0; i &lt; 10; i++) {  
  // var 全域
  console.log(&#39;for loop 的 i: &#39; + i);

  setTimeout( function() {
    console.log(&#39;第&#39; + i + &#39;次&#39;);
  }, 1000);
}
console.log(&#39;i 是 &#39; + i);</code></pre>
<p>上下兩者的執行結果是一樣的</p>
<pre><code class="javascript">for (var i = 0; i &lt; 10; i++) {  
  // var 全域
  console.log(&#39;for loop 的 i: &#39; + i);
}
console.log(&#39;i 是 &#39; + i);

setTimeout( function() {
  console.log(&#39;第&#39; + i + &#39;次&#39;);
}, 1000);</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1YLbSpS-fuQ05S8wIOTaG9Z0d9mPO9STb" alt=""></p>
<p>把 <code>var</code> 改成 <code>let</code></p>
<pre><code class="javascript">for (let i = 0; i &lt; 10; i++) {  
  // let 作用域是 block
  console.log(&#39;for loop 的 i: &#39; + i);

  setTimeout( function() {
    console.log(&#39;第&#39; + i + &#39;次&#39;);
  }, 1000);
}
console.log(&#39;i 是 &#39; + i);</code></pre>
<p>setTimeout 取到的 <code>i</code> 值是 block 裡頭的 <strong>i = 9</strong>, function scope 外則是 not defined。</p>
<p><img src="https://drive.google.com/uc?export=view&id=1mNVObZe4-DWY-09vm11YHvpd44Yorx4V" alt=""></p>
<h3 id="switch-作用域"><a href="#switch-作用域" class="headerlink" title="switch 作用域"></a>switch 作用域</h3><pre><code class="jsx">switch (x) {
  case 0:
    let foo;
    break;

  case 1:
    let foo; // SyntaxError for redeclaration.
    break;
}</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1g866zUYQVXwpK2oGqWNiqoj05cNFp8hy" alt=""></p>
<p>switch 的作用域為整個 switch (綠色框框)，裡面重複宣告 <code>let foo</code> 會出現 Syntax Error: redeclaration of let foo。</p>
<h2 id="重複宣告"><a href="#重複宣告" class="headerlink" title="重複宣告"></a>重複宣告</h2><pre><code class="jsx">var a = 0;
var a = 1;
var a = 2;
console.log(a); // 2</code></pre>
<p><code>var</code> 可以重複宣告。</p>
<pre><code class="jsx">let a = 0;
let a = 1;
console.log(a); // SyntaxError: redeclaration of let a</code></pre>
<p>在 switch 作用域 有提到，let 無法重複宣告。</p>
<pre><code class="jsx">// 那這樣子呢？
var a = 0;
let a = 1;
console.log(a); // SyntaxError: redeclaration of var a</code></pre>
<p><code>a</code> 已經被宣告過了， <code>let</code> 不允許再次宣告。</p>
<h1 id="const"><a href="#const" class="headerlink" title="const"></a>const</h1><p>確定不會重新宣告一個 <strong><em>變數</em></strong> 時，使用 const。</p>
<pre><code class="jsx">const a = 10;
const name = &#39;Bob&#39;;

// 重新賦予值
a = 20; // TypeError: invalid assignment to const &#39;a&#39;
name = &#39;Will&#39;;  // TypeError: invalid assignment to const &#39;name&#39;</code></pre>
<h2 id="一定要賦予值"><a href="#一定要賦予值" class="headerlink" title="一定要賦予值"></a>一定要賦予值</h2><p>const 要宣告一個常數，之後不能夠再修改了，所以在一開始一定要賦予值給它。</p>
<pre><code class="jsx">var a;
let b;
const c;  // SyntaxError: missing = in const declaration</code></pre>
<p>Reference:<br><a href="https://es6.ruanyifeng.com/#docs/let" target="_blank" rel="noopener">ECMAScript 6 入門: let 和 const 命令</a><br><a href="https://ithelp.ithome.com.tw/articles/10191549" target="_blank" rel="noopener">重新認識 JavaScript: Day 10 函式 Functions 的基本概念</a><br><a href="https://blog.techbridge.cc/2018/11/10/javascript-hoisting/" target="_blank" rel="noopener">我知道你懂 hoisting，可是你了解到多深？</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-07-30T12:02:10.000Z" itemprop="datePublished">2020-07-30</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Const/" rel="tag">Const</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-ES6-函式參數的解構賦予值"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/07/30/JS-ES6-%E5%87%BD%E5%BC%8F%E5%8F%83%E6%95%B8%E7%9A%84%E8%A7%A3%E6%A7%8B%E8%B3%A6%E4%BA%88%E5%80%BC/">JS Day 36: ES6 函式參數的解構賦予值</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="Function-Argument-Default-函式參數預設值"><a href="#Function-Argument-Default-函式參數預設值" class="headerlink" title="Function Argument Default 函式參數預設值"></a>Function Argument Default 函式參數預設值</h1><p>在 ES6 之前傳進來的參數必須要透過判斷才可以確定有沒有存在，無法直接設定預設值。現在可以直接在參數後面定義 <code>function checkBMI(bmi = 0) { ... }</code>。</p>
<p>範例：</p>
<pre><code class="jsx">function funcName(foo = &#39;x&#39;, bar = &#39;y&#39;) {
    console.log(foo, bar);
};

funcName(&#39;喔&#39;)
// =&gt; 喔 y

funcName(&#39;喔&#39;, undefined)
// =&gt; 喔 y

funcName(&#39;喔&#39;, &#39;椰&#39;)
// =&gt; 喔 椰</code></pre>
<pre><code class="jsx">// 如果沒有傳入參數，bmi 為 0
function checkBMI(bmi = 0) {
  if (bmi.value === 0) {
    // ... 略過
  }
};</code></pre>
<h1 id="Object-Destructuring-Assignment-解構賦值"><a href="#Object-Destructuring-Assignment-解構賦值" class="headerlink" title="Object Destructuring Assignment 解構賦值"></a>Object Destructuring Assignment 解構賦值</h1><pre><code class="jsx">const data = [
  {
    name: &#39;小傑&#39;,
    height: 175,
    weight: 70,
    properties: {
      bmi: 22.9,
      state: &#39;理想&#39;
    }
  },
  {
    name: &#39;Daniel&#39;,
    height: 200,
    weight: 68,
    properties: {
      bmi: 17,
      state: &#39;體重過輕&#39;
    }
  },
];

// for...of 迭代陣列
// person ＝ 每筆物件
for (const person of data) {
  renderData(person);
  render(person);
};

// 方法一
function render(person) {
    // 如果層次太多，會變得落落長一串
  console.log(&#39;物件： &#39; + person.name, person.properties.bmi, person.properties.state);
};

// 方法二
// 跟解構變數賦予值方式ㄧ樣
function renderData(
  {
    name, 
    height, 
    weight, 
    properties: { 
      bmi: bmiValue,
      state: stateText
    }
  }) {
  console.log(&#39;物件解構： &#39; + name, bmiValue, stateText); // 變得簡潔
};</code></pre>
<p>解構變數賦予值</p>
<pre><code class="jsx">const data = {
  name: &#39;小傑&#39;,
  height: 175,
  weight: 70,
  properties: {
    bmi: 22.9,
    state: &#39;理想&#39;
  }
};

let { name, height, weight, properties: {bmi: bmiValue, state: stateText} } = data;
console.log(name, bmiValue, stateText);
</code></pre>
<p>Reference:<br><a href="https://es6.ruanyifeng.com/#docs/function" target="_blank" rel="noopener">ECMAScript 6 入門</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="_blank" rel="noopener">解構賦值</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-07-29T17:39:11.000Z" itemprop="datePublished">2020-07-30</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-Selenium-WebDriver-with-Ruby-on-Headless-Chrome-Firefox-無頭爬蟲模式"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/07/28/Selenium-WebDriver-with-Ruby-on-Headless-Chrome-Firefox-%E7%84%A1%E9%A0%AD%E7%88%AC%E8%9F%B2%E6%A8%A1%E5%BC%8F/">Selenium WebDriver with Ruby on Headless Chrome/Firefox 無頭爬蟲模式</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <p>使用 geckodriver 來連接 headless Firefox 與 Selenium 或是使用 chromedriver 來連接 Chrome 與 Selenium</p>
<p>安裝 Geckodriver / Chromedriver</p>
<pre><code class="bash">$ brew install geckodriver // Firefox
$ brew cask install chromedriver // Chrome</code></pre>
<p>安裝 Selenium Gem</p>
<pre><code class="bash">$ gem install selenium-webdriver</code></pre>
<p>引用 Selenium WebDriver 模組</p>
<pre><code class="ruby">require &#39;selenium-webdriver&#39;</code></pre>
<p>指定欲使用的瀏覽器</p>
<p>Firefox</p>
<pre><code class="ruby">options = Selenium::WebDriver::Firefox::Options.new(args: [&#39;-headless&#39;])
driver = Selenium::WebDriver.for :firefox, options: options</code></pre>
<p>Chrome</p>
<pre><code class="ruby">options = Selenium::WebDriver::Chrome::Options.new(args: [&#39;headless&#39;])
driver = Selenium::WebDriver.for :chrome, options: options</code></pre>
<p>使用 selenium 操控無頭瀏覽器</p>
<pre><code class="ruby"># 連結到台灣電子地圖服務網
driver.get(&#39;http://www.map.com.tw&#39;)

# 點擊搜尋欄位
# &lt;input type=&quot;text&quot; style=&quot;margin-left:7px;&quot; id=&quot;searchWord&quot; value=&quot;例如:新北市中和區中正路716號&quot; ondblclick=&quot;this.value=&#39;&#39;&quot;&gt;
driver.find_element(id: &#39;searchWord&#39;).click
</code></pre>
<pre><code class="ruby"># 由於 input 的值設定為&#39;例如:新北市中和區中正路716號&#39;，所以必須先清除掉
driver.find_element(id: &#39;searchWord&#39;).clear

# 讓瀏覽器代替輸入&#39;高雄市苓雅區和平一路147號&#39;並送出表單
driver.find_element(id: &#39;searchWord&#39;).send_keys &#39;高雄市苓雅區和平一路147號&#39;, :return

# 這邊要等待兩秒, 否則 .winfoIframe 還沒有產生會發生找不到 element
# 當初在這邊卡超久的，幸好有看到花哥分享了 Python 爬蟲有寫到等待，才發現可以這樣用
sleep 2

# store iframe web element
# 另一種方法 iframe = driver.find_element(:css, &quot;.windowInfo &gt; iframe&quot;)
iframe = driver.find_element(class: &#39;winfoIframe&#39;)

# 切換到 iframe
driver.switch_to.frame(iframe)

# 點擊 &#39;座標&#39; 圖示進行跳頁
driver.find_elements(class: &#39;fun&#39;)[1].click

# 使用 xpath 取得頁面上的經緯度
coordinates = driver.find_element(xpath: &quot;/html/body/form/div[5]/table/tbody/tr[2]/td&quot;).text.split(&#39; &#39;)

# 經緯度
latitude = coordinates[0].split(&#39;：&#39;)[1]
longitude = coordinates[1].split(&#39;：&#39;)[1]

puts latitude
puts longitude</code></pre>
<p>Reference:<br><a href="https://medium.com/%E8%8A%B1%E5%93%A5%E7%9A%84%E5%A5%87%E5%B9%BB%E6%97%85%E7%A8%8B/geocoding-%E6%89%B9%E9%87%8F%E8%99%95%E7%90%86%E5%9C%B0%E5%9D%80%E8%BD%89%E6%8F%9B%E7%B6%93%E7%B7%AF%E5%BA%A6-721ab2564c88" target="_blank" rel="noopener">Geocoding - 批量處理地址轉換經緯度</a><br><a href="https://www.selenium.dev/documentation/en/getting_started_with_webdriver/locating_elements/" target="_blank" rel="noopener">Selenium</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-07-27T16:56:06.000Z" itemprop="datePublished">2020-07-28</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/Ruby/">Ruby</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Headless/" rel="tag">Headless</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Ruby/" rel="tag">Ruby</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Selenium/" rel="tag">Selenium</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  

  
    <nav class="pagination">
      
      <span class="page-number current">1</span><a class="page-number" href="/notes/page/2/">2</a><a class="extend next" rel="next" href="/notes/page/2/">下一页</a>
    </nav>
  
</div>

        </section>
      </section>
      <aside class="sidebar">
        <div class="widget">
          

  

  
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/notes/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/Ruby/">Ruby</a></li></ul>
    </div>
  </div>



  
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/AJAX/" rel="tag">AJAX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/AXIOS/" rel="tag">AXIOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/ArrowFunction/" rel="tag">ArrowFunction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Const/" rel="tag">Const</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Date/" rel="tag">Date</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Fetch/" rel="tag">Fetch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Headless/" rel="tag">Headless</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Hoisting/" rel="tag">Hoisting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Let/" rel="tag">Let</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Location/" rel="tag">Location</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Regex/" rel="tag">Regex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Ruby/" rel="tag">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Selenium/" rel="tag">Selenium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Token/" rel="tag">Token</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Var/" rel="tag">Var</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/XMLHttpRequest/" rel="tag">XMLHttpRequest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/this/" rel="tag">this</a></li></ul>
    </div>
  </div>



  
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/notes/2020/08/17/JS-Day-49-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-axios-%E5%82%B3%E9%81%9E-token/">JS Day 49: 如何使用 axios 傳遞 token</a>
          </li>
        
          <li>
            <a href="/notes/2020/08/16/JS-Day-47-AJAX-Request-XMLHttpRequest-Fetch-AXIOS/">JS Day 47: AJAX Request - XMLHttpRequest, Fetch, AXIOS</a>
          </li>
        
          <li>
            <a href="/notes/2020/08/14/JS-Day-44-window-location/">JS Day 44: window.location</a>
          </li>
        
          <li>
            <a href="/notes/2020/08/08/JS-Day-42-Date-%E6%96%B9%E6%B3%95%EF%BC%86%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F/">JS Day 42: Date() 方法＆日期格式</a>
          </li>
        
          <li>
            <a href="/notes/2020/08/06/JS-Day-41-Date-%E5%9E%8B%E5%88%A5/">JS Day 41: Date() 型別</a>
          </li>
        
      </ul>
    </div>
  </div>


  
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/notes/archives/2020/08/">2020</a></li></ul>
    </div>
  </div>



        </div>
        <div id="backtop"><i class="icon icon-arrow-up"></i></div>
      </aside>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-inner">
        <div class="footer-info">
            <span>&copy; 2013 - 2020 William&#39;s Notes</span>
        </div>
        <div class="footer-powered">
            <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a> Theme · Powered By Hexo
        </div>
    </div>
</footer>




<script src="/notes/dist/build.js?1.5.0.js"></script>


<script src="/notes/dist/custom.js?1.5.0.js"></script>





<!-- Google Analytics-->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-173126595-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-173126595-1');
</script>




</body>
</html>