<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>William&#39;s Notes</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

    

    

    
<link rel="stylesheet" href="/notes/dist/build.css?v=1.5.0.css">


    <script>
        window.aomori = {
            
        }
    </script>

<meta name="generator" content="Hexo 4.2.1"></head>

<body>

  <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="avatar avatar-sm">
                <img src="/images/avatar.jpg" alt="Will Doe">
            </div>
            
            <a href="https://williamafil.github.io/notes">William&#39;s Notes</a>
            
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/notes/">Home</a>
                
                <a href="/notes/archives">Archives</a>
                
            </div>
            <div class="header-menu-social">
                
    <a class="social" target="_blank" href="https://github.com/williamafil/notes/">
        <box-icon type='logo' name='Github'></box-icon>
    </a>

    <a class="social" target="_blank" href="">
        <box-icon type='logo' name=''></box-icon>
    </a>

            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/notes/">Home</a>
                    
                    <a href="/notes/archives">Archives</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

  <div class="container">
    <div class="main">
      <section class="inner">
        <section class="inner-main">
          <div class="index">
  
    
      <article
  id="post-Vue-CLI-環境變數-模式"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/09/18/Vue-CLI-%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8-%E6%A8%A1%E5%BC%8F/">Vue CLI - 環境變數&amp;模式</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <p>今天用 Vue CLI 建置了一個 project，發現放置環境變數的 config 目錄不見了，也找不到 .env 之類的檔案。參考了官方文件，順便做一下筆記。</p>
<blockquote>
<p><strong>Modes and Environment Variables</strong><br><a href="https://cli.vuejs.org/guide/mode-and-env.html" target="_blank" rel="noopener">https://cli.vuejs.org/guide/mode-and-env.html</a></p>
</blockquote>
<h1 id="Mode-模式"><a href="#Mode-模式" class="headerlink" title="Mode 模式"></a>Mode 模式</h1><p>Vue CLI 有三種模式：development, test, production</p>
<p>舊版 package.json</p>
<pre><code class="bash"># 這是之前舊版 Vue CLI 產生的 package.json
&quot;scripts&quot;: {
  &quot;dev&quot;: &quot;webpack-dev-server --inline --progress --config build/webpack.dev.conf.js&quot;,
  &quot;start&quot;: &quot;npm run dev&quot;,
  &quot;build&quot;: &quot;node build/build.js&quot;
},</code></pre>
<p>舊版環境文件</p>
<pre><code class="bash"># dev.env.js

&#39;use strict&#39;
const merge = require(&#39;webpack-merge&#39;)
const prodEnv = require(&#39;./prod.env&#39;)

module.exports = merge(prodEnv, {
  NODE_ENV: &#39;&quot;development&quot;&#39;,
  APIPATH: &#39;&quot;https://vue-course-api.hexschool.io&quot;&#39;,
  CUSTOMPATH: &#39;&quot;ur_will_kome&quot;&#39;
  // NODE_ENV: &#39;&quot;development&quot;&#39;,
  // API_PATH: &#39;&quot;https://vue-course-api.hexschool.io&quot;&#39;,
  // CUSTOM_PATH: &#39;&quot;ur_will_kome&quot;&#39;
})</code></pre>
<p>現行版本的 package.json</p>
<pre><code class="bash">&quot;scripts&quot;: {
  &quot;serve&quot;: &quot;vue-cli-service serve&quot;, # 預設使用 development
  &quot;build&quot;: &quot;vue-cli-service build&quot;, # 在 build 時會使用 production 環境文件 (.env, .env.production, .env.production.local 等）
},</code></pre>
<p>Vue CLI 有三種模式：development, test, production，不同模式下會使用不同的環境文件。</p>
<p><a href="https://cli.vuejs.org/guide/mode-and-env.html#modes" target="_blank" rel="noopener"># Modes</a></p>
<blockquote>
<p><em>development</em> is used by <code>vue-cli-service serve</code><br><em>test</em> is used by <code>vue-cli-service test:unit</code><br><em>production</em> is used by <code>vue-cli-service build</code> and <code>vue-cli-service test:e2e</code></p>
</blockquote>
<h1 id="環境變數"><a href="#環境變數" class="headerlink" title="環境變數"></a>環境變數</h1><p><a href="https://cli.vuejs.org/guide/mode-and-env.html#environment-variables" target="_blank" rel="noopener"># Environment Variables</a></p>
<p>只要在根目錄下加入環境文件即可。命名方式如下：</p>
<pre><code class="bash"># 環境文件
.env.env            # loaded in all cases
.env.local          # loaded in all cases, ignored by git
.env.[mode]         # only loaded in specified mode
.env.[mode].local   # only loaded in specified mode, ignored by git</code></pre>
<p>如果後方有加上 .local 則不會上傳到 git，在 local 端的環境文件都會被忽略。</p>
<pre><code class="bash">## .gitignore

# local env files
.env.local
.env.*.local</code></pre>
<p>環境文件使用 <code>key=value</code> 組成</p>
<pre><code class="bash">NODE_ENV=development
VUE_APP_TITLE=&#39;我是環境文件&#39;
VUE_API_PATH=&#39;&quot;https://www.abcdefg.com/api/&quot;&#39;</code></pre>
<p>** 如果要在程式裡使用到環境變數，變數命名需要以 <code>VUE_APP</code> 開頭</p>
<h1 id="使用環境變數"><a href="#使用環境變數" class="headerlink" title="使用環境變數"></a>使用環境變數</h1><pre><code class="jsx">console.log(process.env.VUE_APP_TITLE) // =&gt; 我是環境文件</code></pre>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-09-18T03:49:54.000Z" itemprop="datePublished">2020-09-18</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/Vue-js/">Vue.js</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/VueCLI/" rel="tag">VueCLI</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-Firebase-Actions"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/09/17/Firebase-Actions/">Firebase Actions</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="Connect-to-database"><a href="#Connect-to-database" class="headerlink" title="Connect to database"></a>Connect to database</h1><pre><code class="jsx">const database = firebase.database();</code></pre>
<h1 id="Bind-Data"><a href="#Bind-Data" class="headerlink" title="Bind Data"></a>Bind Data</h1><p>get data and push them to messages array</p>
<pre><code class="jsx">database.ref(&#39;messages&#39;).on(&#39;child_added&#39;, snapshot =&gt; {
  this.messages.push(snapshot.val())
})

// Include ID
// value = snapshot.val() | key = snapshot.key
database.ref(&#39;messages&#39;).on(&#39;child_added&#39;, snapshot =&gt; {
  this.messages.push({...snapshot.val(), id: snapshot.key})
  console.log(this.messages)
})</code></pre>
<h1 id="Firebase-Actions"><a href="#Firebase-Actions" class="headerlink" title="Firebase Actions"></a>Firebase Actions</h1><h2 id="write-data-into-database"><a href="#write-data-into-database" class="headerlink" title="write data into database"></a>write data into database</h2><pre><code class="jsx">database.ref(&#39;messages&#39;).push({text: this.messageText, nickname: this.nickname})

// data gets created if the path is not existed
// &#39;/&#39; 代表一個節點
database.ref(&#39;nodeOne/nodeTwo/nodeThree&#39;).set(&#39;third&#39;)
database.ref(&#39;nodeOne&#39;).child(&#39;nodeTwo&#39;).child(&#39;nodethree&#39;).set(&#39;3rd&#39;)

// ps: case sensitive</code></pre>
<pre><code>messages
|--    -L8HkVXx_jUWUXDIVDlR
    |--    nickname: Will
    |-- text: HelloWorld

nodeOne
|--    nodeTwo
    |--    nodeThree: third
    |-- nodethree: 3rd
</code></pre><h2 id="delete-data"><a href="#delete-data" class="headerlink" title="delete data"></a>delete data</h2><pre><code class="jsx">database.ref(&#39;messages&#39;).child(&#39;ID&#39;).remove()

// delete message and re-render the DOM
database.ref(&#39;messages&#39;).on(&#39;child_removed&#39;, snapshot =&gt; {
  const indexOfDeletedMsg = this.messages.findIndex( message =&gt; message.id === snapshot.key)
  this.messages.splice(indexOfDeletedMsg, 1)
})</code></pre>
<p>remove from DOM will cause other online users not seeing messages been removed, only if they refresh the page</p>
<h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><pre><code class="jsx">// set text value
// database.ref(&#39;messages&#39;).child(&#39;ID&#39;).child(&#39;text&#39;).set(&#39;updated value&#39;)

database.ref(&#39;messages&#39;).child(&#39;-MHP86XkIhmaSzN9Fodt&#39;).update({text: &#39;updated message&#39;})

// fetch data form the updated ms
database.ref(&#39;messages&#39;).on(&#39;child_changed&#39;, snapshot =&gt; {
  const updateMessage = this.messages.find(message =&gt; message.id === snapshot.key)
  updateMessage.text = snapshot.val().text
})
</code></pre>
<p>update multiple records</p>
<pre><code class="jsx">messages[&#39;-Fei3Eee7a/name&#39;] = &#39;Will&#39;
messages[&#39;-L8kSxxE/name&#39;] = &#39;Will&#39;
messages[&#39;-L8kSxxE/text&#39;] = &#39;new message&#39;

database.ref().update(messages)</code></pre>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-09-17T05:59:20.000Z" itemprop="datePublished">2020-09-17</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/Database/">Database</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Firebase/" rel="tag">Firebase</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-學習資源"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/09/12/%E5%AD%B8%E7%BF%92%E8%B3%87%E6%BA%90/">學習資源</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="學習資源"><a href="#學習資源" class="headerlink" title="學習資源"></a>學習資源</h1><h2 id="Back-end"><a href="#Back-end" class="headerlink" title="Back-end"></a><em>Back-end</em></h2><h4 id="Ruby-on-Rails"><a href="#Ruby-on-Rails" class="headerlink" title="Ruby on Rails"></a>Ruby on Rails</h4><ul>
<li><a href="https://www.rubyguides.com/" target="_blank" rel="noopener">Ruby Guides</a></li>
<li><a href="https://gorails.com/" target="_blank" rel="noopener">GO RAILS</a></li>
<li><a href="https://www.driftingruby.com/" target="_blank" rel="noopener">Drifting Ruby</a></li>
<li><a href="http://railscasts.com/" target="_blank" rel="noopener">RAILSCASTS</a> (停止更新)</li>
</ul>
<h2 id="Front-end"><a href="#Front-end" class="headerlink" title="Front-end"></a><em>Front-end</em></h2><ul>
<li><a href="https://www.freecodecamp.org/" target="_blank" rel="noopener">Free Code Camp</a> (HTML, CSS, JavaScript Algorithms, Python, etc.)</li>
<li><a href="https://frontendmasters.com/" target="_blank" rel="noopener">Frontend Masters</a> (JavaScript, Vue, React, Angular, CSS, D3, etc.)</li>
</ul>
<h4 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h4><ul>
<li><a href="https://ithelp.ithome.com.tw/users/20065504/ironman/1259?page=1" target="_blank" rel="noopener">重新認識 JavaScript</a> (<a href="https://www.tenlong.com.tw/products/9789864344130" target="_blank" rel="noopener">實體書：0 陷阱！0 誤解！8 天重新認識 JavaScript！</a>)</li>
<li><a href="https://wangdoc.com/javascript/" target="_blank" rel="noopener">JavaScript 教程</a> (簡體)</li>
<li><a href="https://es6.ruanyifeng.com/" target="_blank" rel="noopener">ES6 入门教程</a> (簡體)</li>
<li><a href="https://htmldom.dev/" target="_blank" rel="noopener">how to manage HTML DOM</a></li>
</ul>
<h4 id="Vue-js"><a href="#Vue-js" class="headerlink" title="Vue.js"></a>Vue.js</h4><ul>
<li><a href="https://www.vuemastery.com/" target="_blank" rel="noopener">Vue Mastery</a></li>
<li><a href="https://vueschool.io/" target="_blank" rel="noopener">Vue School</a> (英文口音有點重)</li>
</ul>
<h2 id="Markdown"><a href="#Markdown" class="headerlink" title="Markdown"></a>Markdown</h2><ul>
<li><a href="https://markdown.tw/" target="_blank" rel="noopener">Markdown 文件</a></li>
</ul>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-09-12T04:36:01.000Z" itemprop="datePublished">2020-09-12</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/Resources/">Resources</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/HTML/" rel="tag">HTML</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-在-Table-裡面使用-Form"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/09/09/%E5%9C%A8-Table-%E8%A3%A1%E9%9D%A2%E4%BD%BF%E7%94%A8-Form/">在 Table 裡面使用 Form</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <p><img src="https://drive.google.com/uc?export=view&id=1ZY1Ns8ysv-CN7cfABzGhCgQMb9ipRrJo" alt=""><br>把 form 放在 table, tbody, 或 tr 底下，瀏覽器會把 form 移動位子，而裡面的元素則會留在原位。</p>
<pre><code class="html">&lt;!-- 原來應該是這樣子 --&gt;
&lt;form&gt;
    ... input fields ...
&lt;/form&gt;</code></pre>
<pre><code class="html">&lt;!-- 現在變成這樣子 --&gt;
&lt;form&gt;&lt;/form&gt;
... inputs fields ...</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1z67n84FMbAq6lNJk5m_bCzVP3D_VxAsg" alt=""></p>
<p>如果將整個 table 封裝在 form 中，問題在於所有表單元素都將在 submit 時發送。此方法允許您為每個 row (tr) 定義一個表單，並在 submit 時僅發送該行資料。 </p>
<p>將 form 包著 tr 周圍（或將 tr 包著 form）的問題在於它是無效的 html，因為 DOM 已損壞。</p>
<p><strong>解法1 - HTML form attribute</strong></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefform" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#htmlattrdefform</a></p>
<pre><code class="html">&lt;form method=&quot;GET&quot; id=&quot;my_form&quot;&gt;&lt;/form&gt;

&lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;
            &lt;input type=&quot;text&quot; name=&quot;company&quot; form=&quot;my_form&quot; /&gt;
            &lt;button type=&quot;button&quot; form=&quot;my_form&quot;&gt;ok&lt;/button&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;</code></pre>
<p>把 form fields 跟 form 標籤分離，利用 form tag 的 id 讓 form field 去做關聯。 (IE不支援）</p>
<p><strong>解法2 - 做個假 table</strong></p>
<pre><code class="html">&lt;style&gt;
  DIV.table {
      display:table;
  }
  FORM.tr, DIV.tr{
      display:table-row;
  }
  SPAN.td{
      display:table-cell;
  }
&lt;/style&gt;

...

&lt;div class=&quot;table&quot;&gt;
  &lt;form class=&quot;tr&quot; method=&quot;post&quot; action=&quot;blah.html&quot;&gt;
    &lt;span class=&quot;td&quot;&gt;&lt;input type=&quot;text&quot;/&gt;&lt;/span&gt;
    &lt;span class=&quot;td&quot;&gt;&lt;input type=&quot;text&quot;/&gt;&lt;/span&gt;
  &lt;/form&gt;
  &lt;div class=&quot;tr&quot;&gt;
    &lt;span class=&quot;td&quot;&gt;(cell data)&lt;/span&gt;
    &lt;span class=&quot;td&quot;&gt;(cell data)&lt;/span&gt;
  &lt;/div&gt;
  ...
&lt;/div&gt;</code></pre>
<p>IE 7 不支援 CSS table， IE8 需要宣告 doctype 才可以使用。</p>
<pre><code class="html">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;
&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</code></pre>
<p>Reference:<br><a href="https://stackoverflow.com/questions/5967564/form-inside-a-table/5967613" target="_blank" rel="noopener">Form inside a table</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-09-09T14:56:18.000Z" itemprop="datePublished">2020-09-09</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/HTML-CSS/">HTML, CSS</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Form/" rel="tag">Form</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/HTML/" rel="tag">HTML</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-簡易-Date-Picker"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/26/JS-%E7%B0%A1%E6%98%93-Date-Picker/">JS: 簡易 Date Picker</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <p>如何使用 JavaScript 實作一個 date picker。參考教學: <a href="https://www.youtube.com/watch?v=wY2dao1hJms" target="_blank" rel="noopener">Custom Date Picker in JavaScript &amp; CSS</a>。</p>
<p>這邊做一下筆記如何完成以及哪邊該注意的。</p>
<h1 id="起始結構"><a href="#起始結構" class="headerlink" title="起始結構"></a>起始結構</h1><pre><code>- index.html
- reset.css
- style.css
- app.js
- simple-date-picker
        - simple-date-picker.css
        -    simple-date-picker.js</code></pre><p>index.html</p>
<pre><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Simple Date Picker&lt;/title&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;reset.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot;&gt;
  &lt;link rel=&quot;stylesheet&quot; href=&quot;./simple-date-picker/simple-date-picker.css&quot;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class=&quot;container&quot;&gt;
    &lt;div id=&quot;date-picker&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;

  &lt;script src=&quot;./simple-date-picker/simple-date-picker.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;app.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p>style.css</p>
<pre><code class="css">.container {
  width: 100vw;
  height: 100vh;
  background: rgb(249,242,206);
  background: linear-gradient(156deg, rgba(249,242,206,1) 2%, rgba(184,230,246,1) 96%);
  display: flex;
  justify-content: center;
  align-items: center;
}

#date-picker {
  width: 350px;
}</code></pre>
<p>simple-date-picker.css</p>
<pre><code class="css">@import url(&#39;https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700&amp;display=swap&#39;);

.simple-date-picker {
  font-family: &#39;Roboto&#39;, sans-serif;
  position: relative;
  width: 350px;
  height: 70px;
  background-color: mintcream;
  margin: 10px auto;
  box-shadow: 0px 2px 6px rgba(0,0,0,.2);
  cursor: pointer;
  user-select: none;
}

.simple-date-picker:hover {
  background-color: #e9f9ff;
}

.simple-date-picker .selected-date {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #313131;
  font-size: 30px;
}

.simple-date-picker .dates {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background-color: #fff;
}

// active 展開
.simple-date-picker .dates.active {
  display: block;
}</code></pre>
<p>simple-date-picker.js</p>
<pre><code class="jsx">const datePicker = ({root}) =&gt; {
  root.innerHTML = `
    &lt;div class=&quot;simple-date-picker&quot;&gt;
      &lt;div class=&quot;selected-date&quot;&gt;08-25-2020&lt;/div&gt;
      &lt;div class=&quot;dates&quot;&gt;
        &lt;div class=&quot;month&quot;&gt;
          &lt;div class=&quot;btns prev-month&quot;&gt;&lt;&lt;&lt;/div&gt;
          &lt;div class=&quot;month-label&quot;&gt;八月&lt;/div&gt;
          &lt;div class=&quot;btns next-month&quot;&gt;&gt;&gt;&lt;/div&gt;          
        &lt;/div&gt;
          &lt;div class=&quot;days&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `;

    const datepickerElement = root.querySelector(&#39;.simple-date-picker&#39;);
  const selectedDateElement = root.querySelector(&#39;.simple-date-picker .selected-date&#39;);
  const datesElement = root.querySelector(&#39;.simple-date-picker .dates&#39;);

  datepickerElement.addEventListener(&#39;click&#39;, toggleDatepicker);

  function toggleDatepicker(e){
    console.log(&#39;展開 datepicker&#39;)
  }
}</code></pre>
<p>這邊的先用一個函式打包，方便以後可以在其他地方使用，也可以一次使用多個，不會互相打架。</p>
<p>app.js</p>
<pre><code class="jsx">datePicker({
  root: document.querySelector(&#39;#date-picker&#39;),
});</code></pre>
<p>在 app.js 裡呼叫，生成一個 date picker，順便指定要載入的元素 #date-picker。</p>
<p><img src="https://drive.google.com/uc?export=view&id=193ZLxlmNi9ZoFlEt2QiH1XVFHeKSC0a5" alt=""></p>
<h1 id="展開-關閉日期選擇器"><a href="#展開-關閉日期選擇器" class="headerlink" title="展開/關閉日期選擇器"></a>展開/關閉日期選擇器</h1><h2 id="toggle-開關"><a href="#toggle-開關" class="headerlink" title="toggle 開關"></a>toggle 開關</h2><p>現在日期選擇器可以展開，但是如果滑鼠點擊『月份選擇』區塊時，它會關閉。這時候需要檢查滑鼠所點擊的位置有沒有在 <code>.dates</code> 區塊。</p>
<p>在 simple-date-picker.js 裡面新增一個 helper function。</p>
<pre><code class="jsx">...(略)

datepickerElement.addEventListener(&#39;click&#39;, toggleDatepicker);

function toggleDatepicker(e){
  console.log(e.path);
  if (!checkEventPathForClass(e.path, &#39;dates&#39;)) {
    datesElement.classList.toggle(&#39;active&#39;);
  }
}

function checkEventPathForClass (path, selector) {
  for (let i = 0; i &lt; path.length; i++) {
    if (path[i].classList &amp;&amp; path[i].classList.contains(selector)) {
      console.log(&#39;path[i].classList&#39;, path[i].classList)
      console.log(&#39;contains selector? &#39;, path[i].classList.contains(selector))
      return true;
    }
  }
  return false;
}</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1hnF_VebqCbOajI4oJU5R1lYQN2-0Zio3" alt=""></p>
<p>當 date picker 展開時，滑鼠點擊下方『月份選擇』區塊時，e.path 是有包含 selector <code>dates</code>，所以會 return <code>true</code>。</p>
<pre><code class="jsx">if (!checkEventPathForClass(e.path, &#39;dates&#39;)) {
  datesElement.classList.toggle(&#39;active&#39;);
}</code></pre>
<p>而我們要 checkEventPathForClass 非 true 時，才關閉日期選擇器。</p>
<h2 id="點擊以外元素＆關閉"><a href="#點擊以外元素＆關閉" class="headerlink" title="點擊以外元素＆關閉"></a>點擊以外元素＆關閉</h2><p>如果要點擊 #date-picker (root) 以外的地方就關閉日期選擇棄，也可以用類似方法達到。</p>
<pre><code class="jsx">document.addEventListener(&#39;click&#39;, function(e){
  if (!root.contains(e.target)){
    datesElement.classList.remove(&#39;active&#39;);
  }
});</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1ajB_sLyPx4Q4sNSK3G4_YiICflAU-fv6" alt=""></p>
<p>判斷 <code>root</code> element (date picker 所有元素）有沒有包含滑鼠點擊的元素（<code>e.target</code>）。頭兩次的 e.target 都沒有包含所以選擇器不會關閉，到了第三個才會 remove class <code>active</code>。</p>
<h1 id="月份-amp-日期選擇器"><a href="#月份-amp-日期選擇器" class="headerlink" title="月份 &amp; 日期選擇器"></a>月份 &amp; 日期選擇器</h1><h2 id="CSS-Style"><a href="#CSS-Style" class="headerlink" title="CSS Style"></a>CSS Style</h2><pre><code class="css">/* 月份選擇 */
.simple-date-picker .dates .month {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 3px solid #eee;
  padding: 5px;
}

/* 月份選擇 左右按鈕 */
.simple-date-picker .dates .month .btns {
  width: 35px;
  height: 35px;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #313131;
  font-size: 20px;
  border-radius: 50%;
}

.simple-date-picker .dates .month .btns:hover {
  background-color: whitesmoke;
  color: #999;
}

.simple-date-picker .dates .month .btns:active {
  background-color: azure;
  color: #bbb;
}</code></pre>
<p>在月份選擇區塊加入樣式。</p>
<pre><code class="css">/* 日期選擇器 */
.simple-date-picker .dates .days {
  height: 240px;
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  border-radius: 5px;
}

.simple-date-picker .dates .days .day {
  display: flex;
  justify-content: center;
  align-items: center;
  color: #313131;
  font-size: 15px;
  font-weight: 300;
  border-radius: 50%;
  border: 1px solid #eee;
  background-color: #eee;
  margin: 5px;
}

.simple-date-picker .dates .days .day:hover {
  font-weight: 700;
  background-color: #fff;
  border: 1px solid #eee;
}

.simple-date-picker .dates .days .day:active,
.simple-date-picker .dates .days .day.selected  {
  font-weight: 700;
  background-color: lightsalmon;
  border: 1px solid lightsalmon;
  color: #fff;
}</code></pre>
<p>在日期區塊加入樣式。</p>
<pre><code class="jsx">const datePicker = ({root}) =&gt; {
  root.innerHTML = `
    &lt;div class=&quot;simple-date-picker&quot;&gt;
      &lt;div class=&quot;selected-date&quot;&gt;08-25-2020&lt;/div&gt;
      &lt;div class=&quot;dates&quot;&gt;
        &lt;div class=&quot;month&quot;&gt;
          &lt;div class=&quot;btns prev-month&quot;&gt;&lt;&lt;&lt;/div&gt;
          &lt;div class=&quot;month-label&quot;&gt;八月&lt;/div&gt;
          &lt;div class=&quot;btns next-month&quot;&gt;&gt;&gt;&lt;/div&gt;          
        &lt;/div&gt;
        &lt;div class=&quot;days&quot;&gt;

                    &lt;!-- 這部分先加入日期，測試一下樣式 --&gt;
          &lt;div class=&quot;day&quot;&gt;1&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;2&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;3&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;4&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;5&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;6&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;7&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;8&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;9&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;10&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;11&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;12&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;13&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;14&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;15&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;16&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;17&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;18&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;19&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;20&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;21&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;22&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;23&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;24&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;25&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;26&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;27&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;28&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;29&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;30&lt;/div&gt;
          &lt;div class=&quot;day&quot;&gt;31&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

    &lt;/div&gt;
  `;

.... 略</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1yepx9qJA0Qg1rrARGdfr-dOxdwkxejek" alt=""></p>
<h2 id="Date-Picker-預設日期"><a href="#Date-Picker-預設日期" class="headerlink" title="Date Picker 預設日期"></a>Date Picker 預設日期</h2><pre><code class="jsx">const datePicker = ({root}) =&gt; {
  root.innerHTML = `
    &lt;div class=&quot;simple-date-picker&quot;&gt;
            &lt;!-- 填入的日期先清空，要讓 JS 自動填入當下的日期 --&gt;
      &lt;div class=&quot;selected-date&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;dates&quot;&gt;
        &lt;div class=&quot;month&quot;&gt;
          &lt;div class=&quot;btns prev-month&quot;&gt;&lt;&lt;&lt;/div&gt;
          &lt;div class=&quot;month-label&quot;&gt;&lt;/div&gt;
          &lt;div class=&quot;btns next-month&quot;&gt;&gt;&gt;&lt;/div&gt;          
        &lt;/div&gt;
        &lt;div class=&quot;days&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;

    &lt;/div&gt;
  `;

... 略

selectedDateElement.textContent = formatDate(date);

function formatDate(d) {
  let day = d.getDate();
  let month = d.getMonth();
  let year = d.getFullYear();

    if (day &lt; 10) {
    day = `0${day}`;
  }

  if (month &lt; 10){
    month = `0${month+1}`
  }
  return `${year}年 ${month}月 ${day}日`;
}</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1kLgGd0GrTW_bcWBowSS-GT3H0TaMISLE" alt=""></p>
<h2 id="展開時顯示月份年份"><a href="#展開時顯示月份年份" class="headerlink" title="展開時顯示月份年份"></a>展開時顯示月份年份</h2><pre><code class="jsx">const monthElement = root.querySelector(&#39;.simple-date-picker .dates .month .month-label&#39;);
const prevBtn = root.querySelector(&#39;.simple-date-picker .dates .month .prev-month&#39;);
const nextBtn = root.querySelector(&#39;.simple-date-picker .dates .month .next-month&#39;);
const daysElement = root.querySelector(&#39;.simple-date-picker .dates .days&#39;);

const months = [&#39;January&#39;, &#39;February&#39;, &#39;March&#39;, &#39;April&#39;, &#39;May&#39;, &#39;June&#39;, &#39;July&#39;, &#39;August&#39;, &#39;September&#39;, &#39;October&#39;, &#39;November&#39;, &#39;December&#39;];

// 當下日期
let date = new Date();
let day = date.getDate();
let month = date.getMonth();
let year = date.getFullYear();

// 選擇的日期
let selectedDate = date;
let selectedDay = day;
let selectedMonth = month;
let selectedYear = year;

monthElement.textContent = `${ month+1 }月  ${year}年`;  // 展開時顯示的月份＆年份</code></pre>
<h2 id="月份往前-後移動＆更新畫面"><a href="#月份往前-後移動＆更新畫面" class="headerlink" title="月份往前/後移動＆更新畫面"></a>月份往前/後移動＆更新畫面</h2><pre><code class="jsx">prevBtn.addEventListener(&#39;click&#39;, goPrevMonth); // 往前一個月事件監聽
nextBtn.addEventListener(&#39;click&#39;, goNextMonth); // 往後一個月事件監聽

// 當月份往前到 -1 時，要換成 11 (十二月)，年也要跟著減1
function goPrevMonth() {
  month--;
  if (month &lt; 0) {
    month = 11;
    year--;
  }
  monthElement.textContent = `${ month+1 }月  ${year}年`;  // 展開時顯示的月份＆年份
}

// 當月份走到12時 (即十三月)，要換成 0 (一月)，年也要跟著加1
function goNextMonth() {
  month++;
  if (month &gt; 11) {
    month = 0;
    year++;
  }
  monthElement.textContent = `${ month+1 }月  ${year}年`;  // 展開時顯示的月份＆年份
}</code></pre>
<h2 id="加入對應日期"><a href="#加入對應日期" class="headerlink" title="加入對應日期"></a>加入對應日期</h2><pre><code class="jsx">populateDates(month, year);

function goPrevMonth() {
    ... 略
  populateDates(month, year);
}

function goNextMonth() {
  ... 略
  populateDates(month, year);
}

function populateDates(mth, yr) {
  daysElement.innerHTML = &#39;&#39;;
  let amountDays = getTotalDays(mth, yr); // 取得月份共幾天

  for (let i = 0; i &lt; amountDays; i++) {
    const dayElement = document.createElement(&#39;div&#39;);
    dayElement.classList.add(&#39;day&#39;);
    dayElement.textContent = i + 1;

   daysElement.appendChild(dayElement);
  }
}

function getTotalDays(month, year) {
  return new Date(year, month+1, 0).getDate();
}</code></pre>
<p>當要加入對應的日期數量需要先知道被選擇的月份有幾天，所以下面的 getTotalDays() 函式會回傳月份日數，再用這個去跑回圈。</p>
<p><img src="https://drive.google.com/uc?export=view&id=13xVHnwfy5_pO9QkIohcHYUYStwgjv6rN" alt=""></p>
<h2 id="日期事件監聽"><a href="#日期事件監聽" class="headerlink" title="日期事件監聽"></a>日期事件監聽</h2><p>當進入 populateDates() 回圈時，需要幫 dayElement 元素個別加入事件監聽，這樣才知道到底選擇了哪一天。</p>
<pre><code class="jsx">function populateDates(mth, yr) {
  daysElement.innerHTML = &#39;&#39;;
  let amountDays = getTotalDays(mth, yr); // 取得月份共幾天

  for (let i = 0; i &lt; amountDays; i++) {
    const dayElement = document.createElement(&#39;div&#39;);
    dayElement.classList.add(&#39;day&#39;);
    dayElement.textContent = i + 1;

    ＋＋ // 遇到當下日期/被選擇的日期，加上 css style
    ＋＋ if (selectedDay == (i + 1) &amp;&amp; selectedYear == year &amp;&amp; selectedMonth == month) {
    ＋＋   dayElement.classList.add(&#39;selected&#39;);
    ＋＋ }

    ＋＋ dayElement.addEventListener(&#39;click&#39;, function() {
    ＋＋   selectedDate = new Date(year + &#39;-&#39; + (month+1) + &#39;-&#39; + (i+1));
    ＋＋   selectedDay = (i + 1);
    ＋＋   selectedMonth = month;
    ＋＋   selectedYear = year;

      ＋＋ selectedDateElement.textContent = formatDate(selectedDate);
      ＋＋ selectedDateElement.dataset.value = dataSetFormat(selectedDate); // 在元素上加入 dataset，之後要取得日期比較容易。

      ＋＋ populateDates(selectedMonth, selectedYear); // 當選擇了某一天，日期區塊需要重新更新。
    ＋＋ });

   daysElement.appendChild(dayElement);
  }
}

function dataSetFormat(d) {
  const year = d.getFullYear();
  const month = d.getMonth()+1;
  const day = d.getDate();
  return [year, month, day].join(&quot;-&quot;);
}</code></pre>
<p><img src="https://drive.google.com/uc?export=view&id=1kbDyCtpzCbUKVs_GbwiMvQvCSMKkK2m2" alt=""></p>
<p>之後要取得選擇的日期可以直接從 data-value 取得。</p>
<h2 id="加入週"><a href="#加入週" class="headerlink" title="加入週"></a>加入週</h2><pre><code class="css">/* WEEK */
.simple-date-picker .dates .weekday {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  border-radius: 5px;
  padding: 8px;
}

.simple-date-picker .dates .weekday .week {
  display: flex;
  justify-content: center;
  align-items: center;
  color: #313131;
  font-size: 13px;
  font-weight: 600;
  margin: 15px 0 0 0;
}

.simple-date-picker .dates .days .space {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 5px;
  height: 36px;
}</code></pre>
<pre><code class="jsx">
function populateDates(mth, yr) {
  daysElement.innerHTML = &#39;&#39;;

  let amountDays = getTotalDays(mth, yr); // 取得月份共幾天

＋＋ let firstDay = getStartedWeekDay(mth, yr);
＋＋   let spacer = ``;

＋＋   for (let i = 0; i &lt; firstDay; i++) {
＋＋     spacer += `&lt;div class=&quot;space&quot;&gt;&lt;/div&gt;`;
＋＋   }

＋＋   daysElement.innerHTML = spacer;

... 略
}

function getStartedWeekDay(month, year) {
  return new Date(year, month, 1).getDay();
}</code></pre>
<p>使用 getStartedWeekDay() 取得月份起始日是週幾。 <code>getDay()</code> 會回傳本地時間星期中的日子（0-6，從星期日開始)。之後在 daysElement 加入幾個空格，把月份的 1 號撐開至對應的星期日子。</p>
<p><img src="https://drive.google.com/uc?export=view&id=1Y13smXkGm4jbBiZSL8iR1U7lpeABQNNM" alt=""></p>
<hr>
<p><a href="https://williamafil.github.io/JS/SimpleDatePicker/">Sample</a><br><a href="https://github.com/williamafil/williamafil.github.io/tree/master/JS/SimpleDatePicker" target="_blank" rel="noopener">Code</a></p>
<p>Reference:<br><a href="https://www.youtube.com/watch?v=wY2dao1hJms" target="_blank" rel="noopener">Custom Date Picker in JavaScript &amp; CSS</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-25T17:54:13.000Z" itemprop="datePublished">2020-08-26</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/DatePicker/" rel="tag">DatePicker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-Chrome-Dev-Tool-CSS-Overview"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/18/Chrome-Dev-Tool-CSS-Overview/">Chrome Dev Tool: CSS Overview</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <p>在 Chrome 瀏覽器有個實驗性質的功能，很棒。有時候在瀏覽網站時發現有些設計很棒，想要偷師一下，CSS Overview 裡有幾個的功能真的要推一下。</p>
<ol>
<li>首先需要打開 DevTools<br><img src="https://drive.google.com/uc?export=view&id=1LRSNioMxCQViHrgbdsbtuOrw4YN95jX4" alt=""></li>
</ol>
<p><code>Mac</code>: command + option + i<br><code>Win</code>: control + shift + i</p>
<ol start="2">
<li>進入 Settings<br><img src="https://drive.google.com/uc?export=view&id=1LbidcsVBbioduXCcZwrpLRsVTHzFKXdl" alt=""><br>在 DevTools 最上方右側有個齒輪 icon 可以進入 settings。<br><code>Mac</code>: function + F1<br><code>Win</code>: F1<br>接著把左邊欄位第三行 <code>Experiments</code> 裡面 第四個 CSS Overview 打勾</li>
</ol>
<p>重新打開瀏覽器。</p>
<ol start="3">
<li><p>打開 DevTools 裡面的 CSS Overview: Capture overview<br><img src="https://drive.google.com/uc?export=view&id=1L9w2m6gSYCnT2du-p1UMNUxeaz5k2u8m" alt=""><br>按下按鈕瀏覽器就會開始分析了。</p>
</li>
<li><p>分析報告<br><img src="https://drive.google.com/uc?export=view&id=1zzOWfDFjidenzOe-QXoRxHDNV0W2kviP" alt=""><br>除了摘要一些網頁裡共使用了幾個 HTML 元素，下了幾個 style 定義，用了幾個 css selector 之外還有顏色解析。</p>
</li>
</ol>
<p><img src="https://drive.google.com/uc?export=view&id=1HZPOfJmytW2iXmXadn1FFGa62w_tJ1Xl" alt=""><br>這個部分我很喜歡，清楚看到用了多少種背景顏色、文字顏色，甚至連 border 顏色都有。</p>
<p><img src="https://drive.google.com/uc?export=view&id=1tdpJ-GnOZCughtwuKVUXY3klmJuBYrvI" alt=""><br>媽呀，用了哪種字型、字體大小，出現幾次都有紀錄。</p>
<p><img src="https://drive.google.com/uc?export=view&id=1Vm-DqCQsAwP8Cv9lXnhPQEXoTkyuLUJb" alt=""><br>這個網站裡面有已定義卻未使用的 CSS 高達 14 個。這功能對於優化一個網站很棒！<br>下方還有 media queries。目前我觀察了幾個大型網站，media queries 都好長一串，看到眼花。</p>
<p>—</p>
<p>Chrome 這個實驗功能對於初學者我剛要練習切版真的太有幫助了。偶而遇到想要臨攀練習的網站，可以透過 CSS Overview 更理解有些元素怎麼規劃會比較恰當。</p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-17T17:42:31.000Z" itemprop="datePublished">2020-08-18</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/DevTool/">DevTool</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/CSSoverview/" rel="tag">CSSoverview</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Chrome/" rel="tag">Chrome</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/DevTool/" rel="tag">DevTool</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-49-如何使用-axios-傳遞-token"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/17/JS-Day-49-%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8-axios-%E5%82%B3%E9%81%9E-token/">JS Day 49: 如何使用 axios 傳遞 token</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="AXIO-GET-Request"><a href="#AXIO-GET-Request" class="headerlink" title="AXIO GET Request"></a>AXIO GET Request</h1><pre><code class="jsx">axios
  .get(&#39;http://www.abcd1234.com/api/users&#39;)
  .then( res =&gt; {
    console.log(res);
  })
  .catch( err =&gt; {
    console.log(err)
  })</code></pre>
<p>一個 GET 請求可以這樣完成。</p>
<p>如果需要更多設定，例如回傳的格式、帳密驗證，就可以把需要設定的一些 key:value 寫在 config 裡面傳遞給 axios。</p>
<h2 id="axios-url-config"><a href="#axios-url-config" class="headerlink" title="axios(url[, config])"></a>axios(url[, config])</h2><pre><code class="jsx">const api = &#39;https://challenge.thef2e.com/api/thef2e2019/stage6/rooms&#39;;
const token = &#39;token_value&#39;;
const roomInfo = axios({
      method: &#39;GET&#39;,
      url: api,
      responseType: &#39;json&#39;, // responseType 也可以寫在 header 裡面
      headers: {
        // accept: &#39;application/json&#39;,
      },
        auth: {
        username: &#39;xiaoming&#39;,
        password: &#39;abc123&#39;
      },
    })
    .then(function (response) {
  console.log(response);
    })
    .catch(function (error) {
      console.log(&#39;錯誤&#39;,error);
    });</code></pre>
<p>這邊的 auth 是一個基本的 HTTP 驗證。它會生成一個 Authorization header 並覆蓋掉原有的。官方文件有特別說明，如果要傳遞 <code>Bearer tokens</code> 需要在 headers 裡頭自定義 <code>Authorization</code>。</p>
<blockquote>
<p>// <code>auth</code> indicates that HTTP Basic auth should be used, and supplies credentials.<br>// This will set an <code>Authorization</code> header, overwriting any existing<br>// <code>Authorization</code> custom headers you have set using <code>headers</code>.<br>// Please note that only HTTP Basic auth is configurable through this parameter.<br>// <strong><em>For Bearer tokens and such, use <code>Authorization</code> custom headers instead.</em></strong></p>
</blockquote>
<p>這邊有更多的 <a href="https://github.com/axios/axios#request-config" target="_blank" rel="noopener">request config</a> 可以參考。</p>
<pre><code class="jsx">const api = &#39;https://challenge.thef2e.com/api/thef2e2019/stage6/rooms&#39;;
const token = &#39;token_value&#39;;
const roomInfo = axios({
      method: &#39;GET&#39;,
      url: api,
      responseType: &#39;json&#39;, // responseType 也可以寫在 header 裡面
      headers: {
            Authorization: `Bearer ${token}` // Bearer 跟 token 中間有一個空格
      }
    })
    .then(function (response) {
  console.log(response);
    })
    .catch(function (error) {
      console.log(&#39;錯誤&#39;,error);
    });</code></pre>
<p>Reference:</p>
<ul>
<li><a href="https://github.com/axios/axios" target="_blank" rel="noopener">axios</a></li>
</ul>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-17T10:06:23.000Z" itemprop="datePublished">2020-08-17</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AJAX/" rel="tag">AJAX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AXIOS/" rel="tag">AXIOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-47-AJAX-Request-XMLHttpRequest-Fetch-AXIOS"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/16/JS-Day-47-AJAX-Request-XMLHttpRequest-Fetch-AXIOS/">JS Day 47: AJAX Request - XMLHttpRequest, Fetch, AXIOS</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h1><ul>
<li>JavaScript 原生的方法傳送請求</li>
<li>不支援 Promises</li>
<li>語法攏長，較多 callbacks，不好記</li>
</ul>
<h2 id="GET-request"><a href="#GET-request" class="headerlink" title="GET request"></a>GET request</h2><pre><code class="jsx">// GET request
const myReq = new XMLHttpRequest();

myReq.onload = function() {
  const data = JSON.parse(this.responseText);
};

myReq.onerror = function(err) {
  console.log(&#39;Error!&#39;, err);
};

myReq.open(&#39;get&#39;, &#39;https://www.icanhazdadjoke.com/&#39;, true&#39;);
myReq.setRequestHeader(&#39;Accept&#39;, &#39;application/json&#39;);
myReq.send();</code></pre>
<h2 id="POST-request"><a href="#POST-request" class="headerlink" title="POST request"></a>POST request</h2><pre><code class="jsx">// POST request
let xhr = new XMLHttpRequest();
xhr.open(&#39;POST&#39;, &#39;https://hexschool-tutorial.herokuapp.com/api/signup&#39;, true);

// 格式：application/x-www-form-urlencoded
xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/x-www-form-urlencoded&quot;);
xhr.send(&#39;email=abcde@gmail.com&#39;);

// 格式：JSON
// let account = {
//   email:&#39;abcdef@gmail.com&#39;,
//   password: &#39;1234&#39;
// };

// xhr.setRequestHeader(&quot;Content-type&quot;, &quot;application/json&quot;);
// xhr.send(JSON.stringify(account));</code></pre>
<h2 id="範例：GET-Request-StarWars-API-www-swapi-dev"><a href="#範例：GET-Request-StarWars-API-www-swapi-dev" class="headerlink" title="範例：GET Request StarWars API (www.swapi.dev)"></a>範例：GET Request StarWars API (<a href="https://www.swapi.dev" target="_blank" rel="noopener">www.swapi.dev</a>)</h2><pre><code class="jsx">const req = new XMLHttpRequest();
req.addEventListener(&#39;load&#39;, function() {
  console.log(&#39;請求成功!&#39;);
  const data = JSON.parse(this.responseText);
  for (let planet of data.results) {
    console.log(planet.name); // 列出星球名稱
  }
});

req.addEventListener(&#39;error&#39;, () =&gt; {
  console.log(&#39;錯誤&#39;);
});

req.open(&#39;GET&#39;, &#39;https://swapi.dev/api/planets/&#39;)
req.send();
console.log(&#39;request send&#39;)</code></pre>
<p><strong>Planet Request 結果</strong>：第一筆資料</p>
<pre><code class="json">GET /api/planets/
HTTP 200 OK
Content-Type: application/json
Vary: Accept
Allow: GET, HEAD, OPTIONS

{
    &quot;count&quot;: 60, 
    &quot;next&quot;: &quot;http://swapi.dev/api/planets/?page=2&quot;, 
    &quot;previous&quot;: null, 
    &quot;results&quot;: [
        {
            &quot;name&quot;: &quot;Tatooine&quot;, 
            &quot;rotation_period&quot;: &quot;23&quot;, 
            &quot;orbital_period&quot;: &quot;304&quot;, 
            &quot;diameter&quot;: &quot;10465&quot;, 
            &quot;climate&quot;: &quot;arid&quot;, 
            &quot;gravity&quot;: &quot;1 standard&quot;, 
            &quot;terrain&quot;: &quot;desert&quot;, 
            &quot;surface_water&quot;: &quot;1&quot;, 
            &quot;population&quot;: &quot;200000&quot;, 
            &quot;residents&quot;: [
                &quot;http://swapi.dev/api/people/1/&quot;, 
                &quot;http://swapi.dev/api/people/2/&quot;, 
                &quot;http://swapi.dev/api/people/4/&quot;, 
                &quot;http://swapi.dev/api/people/6/&quot;, 
                &quot;http://swapi.dev/api/people/7/&quot;, 
                &quot;http://swapi.dev/api/people/8/&quot;, 
                &quot;http://swapi.dev/api/people/9/&quot;, 
                &quot;http://swapi.dev/api/people/11/&quot;, 
                &quot;http://swapi.dev/api/people/43/&quot;, 
                &quot;http://swapi.dev/api/people/62/&quot;
            ], 
            &quot;films&quot;: [
                &quot;http://swapi.dev/api/films/1/&quot;, 
                &quot;http://swapi.dev/api/films/3/&quot;, 
                &quot;http://swapi.dev/api/films/4/&quot;, 
                &quot;http://swapi.dev/api/films/5/&quot;, 
                &quot;http://swapi.dev/api/films/6/&quot;
            ], 
            &quot;created&quot;: &quot;2014-12-09T13:50:49.641000Z&quot;, 
            &quot;edited&quot;: &quot;2014-12-20T20:58:18.411000Z&quot;, 
            &quot;url&quot;: &quot;http://swapi.dev/api/planets/1/&quot;
        },

...略</code></pre>
<h2 id="Chaining-XMLHttpRequest"><a href="#Chaining-XMLHttpRequest" class="headerlink" title="Chaining XMLHttpRequest"></a>Chaining XMLHttpRequest</h2><p>每一個星球下還有很多資料，例如 films，但是要取的 films 還需要發送 request 才可以取得資料。</p>
<p><strong>Films request 結果</strong></p>
<pre><code class="json">// Film Instance

GET /api/films/5/
HTTP 200 OK
Content-Type: application/json
Vary: Accept
Allow: GET, HEAD, OPTIONS

{
    &quot;title&quot;: &quot;Attack of the Clones&quot;, 
    &quot;episode_id&quot;: 2, 
    &quot;opening_crawl&quot;: &quot;There is unrest in the Galactic\r\nSenate. Several thousand solar\r\nsystems have declared their\r\nintentions to leave the Republic.\r\n\r\nThis separatist movement,\r\nunder the leadership of the\r\nmysterious Count Dooku, has\r\nmade it difficult for the limited\r\nnumber of Jedi Knights to maintain \r\npeace and order in the galaxy.\r\n\r\nSenator Amidala, the former\r\nQueen of Naboo, is returning\r\nto the Galactic Senate to vote\r\non the critical issue of creating\r\nan ARMY OF THE REPUBLIC\r\nto assist the overwhelmed\r\nJedi....&quot;, 
    &quot;director&quot;: &quot;George Lucas&quot;, 
    &quot;producer&quot;: &quot;Rick McCallum&quot;, 
    &quot;release_date&quot;: &quot;2002-05-16&quot;, 
    &quot;characters&quot;: [
        &quot;http://swapi.dev/api/people/2/&quot;, 
        &quot;http://swapi.dev/api/people/3/&quot;, 
        &quot;http://swapi.dev/api/people/6/&quot;, 
        &quot;http://swapi.dev/api/people/7/&quot;, 
        &quot;http://swapi.dev/api/people/10/&quot;, 

       .... 略</code></pre>
<p>Film 底下還有很多資料可以 request，例如人物。如果用 XMLHttpRequest 就可以一直 nested 下去沒完沒了。</p>
<h1 id="Fetch"><a href="#Fetch" class="headerlink" title="Fetch"></a>Fetch</h1><ul>
<li>ES6 原生方法</li>
<li>支援 Promises</li>
<li>不支援 IE</li>
</ul>
<h2 id="POST-Request"><a href="#POST-Request" class="headerlink" title="POST Request"></a>POST Request</h2><pre><code class="jsx">// 來發個 POST Request:

postData(&#39;http://example.com/answer&#39;, {answer: 42})
  .then(data =&gt; console.log(data)) // JSON from `response.json()` call
  .catch(error =&gt; console.error(error))

function postData(url, data) {
  // Default options are marked with *
  return fetch(url, {
    body: JSON.stringify(data), // must match &#39;Content-Type&#39; header
    cache: &#39;no-cache&#39;, // *default, no-cache, reload, force-cache, only-if-cached
    credentials: &#39;same-origin&#39;, // include, same-origin, *omit
    headers: {
      &#39;user-agent&#39;: &#39;Mozilla/4.0 MDN Example&#39;,
      &#39;content-type&#39;: &#39;application/json&#39;
    },
    method: &#39;POST&#39;, // *GET, POST, PUT, DELETE, etc.
    mode: &#39;cors&#39;, // no-cors, cors, *same-origin
    redirect: &#39;follow&#39;, // manual, *follow, error
    referrer: &#39;no-referrer&#39;, // *client, no-referrer
  })
  .then(response =&gt; response.json()) // 輸出成 json
}</code></pre>
<p><strong>HexSchool 註冊帳號範例：</strong></p>
<pre><code class="jsx">const api = &#39;https://hexschool-tutorial.herokuapp.com/api/signup&#39;;
let account = {
    email:&#39;abcdef@gmail.com&#39;,
    password: &#39;1234&#39;
  };

postData(api, account)
  .then(data =&gt; console.log(data)) // JSON from `response.json()` call
  .catch(error =&gt; console.error(error))

function postData(url, data) {
  return fetch(url, {
    body: JSON.stringify(data),
    headers: {
      &#39;content-type&#39;: &#39;application/json&#39;
    },
    method: &#39;POST&#39;,
  })
  .then(response =&gt; response.json()) // 輸出成 json
}

// {success: false, result: {…}, message: &quot;此帳號已被使用&quot;}</code></pre>
<h2 id="GET-Request"><a href="#GET-Request" class="headerlink" title="GET Request"></a>GET Request</h2><pre><code class="jsx">const myReq = fetch(&#39;http://example.com/movies.json&#39;)
  .then(function(response) {
    return response.json();
  })
  .then(function(myJson) {
    console.log(myJson);
  });</code></pre>
<p>範例：改寫 XMLHttpRequest 例子</p>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (response.status !== 202) {
      console.log(&#39;發生錯誤：&#39;, response.status);
      return;
    }
    response.json().then ( data =&gt; {
      for (let planet of data.results) {
        console.log(planet.name);
      }
    })
  })
  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Error: &#39;, err);
  })</code></pre>
<blockquote>
<p>fetch() 回傳的 promise 物件, resolve 和 reject 的使用方式有差異, 當遇到 HTTP Status <code>404</code>, <code>500</code> 時會使用 resolve 但<em>會將 status 的值從 ok 變為 false</em>， reject 只有在網路發生錯誤或是任何會中斷網路請求時才會使用。 — MDN web docs</p>
</blockquote>
<p>除了上方的方式，也可以利用下方的 catch error，即是把錯誤丟給他</p>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planetsss/&#39;) // 網址錯誤
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (response.status !== 202) { // 這邊寫成 if (!response.ok) ** not ok ** 也可以
      throw new Error(`Status: ${response.status}`);
            return;
    }
    response.json().then ( data =&gt; {
      for (let planet of data.results) {
        console.log(planet.name);
      }
    })
  })
  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<p>錯誤跑到下方顯示了。<br><img src="https://drive.google.com/uc?export=view&id=1dK5aSjMRe4_TdzL6xya9dKoKzZSTKVhC" alt="https://drive.google.com/uc?export=view&amp;id=1dK5aSjMRe4_TdzL6xya9dKoKzZSTKVhC"></p>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })

  ////////////////////////////////
  // 從上方 response.json() 往下移，less nested
  .then ( data =&gt; {
    console.log(data);
    for (let planet of data.results) {
      console.log(planet.name);
    }
  })
  ////////////////////////////////

    .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<h2 id="Chaining-Fetch-Requests"><a href="#Chaining-Fetch-Requests" class="headerlink" title="Chaining Fetch Requests"></a>Chaining Fetch Requests</h2><pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(&#39;星球&#39;, response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })
  .then ( data =&gt; {
    //////////////////////////////
    //  request FILM
    const filmAPI = data.results[0].films[0];
    fetch(filmAPI)
      .then( response =&gt; {
        console.log(&#39;影片&#39;, response);
        if (!response.ok) {
          throw new Error(`Status: ${response.status}`);
          return;
        }
        return response.json(); // return promise
      })
      .then ( filmData =&gt; {
        console.log(&#39;filmData&#39;, filmData);
      })
      .catch( err =&gt; {
        console.log(&#39;Catch 錯誤: &#39;, err);
      })
  })
  ////////////////////////////////
  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<pre><code class="jsx">const fetchedData = fetch(&#39;https://swapi.dev/api/planets/&#39;)
  .then( response =&gt; {
    // status: 404/500 promise 一樣會是 resolved (ok 值會從 true 變成 false)
    console.log(response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })

  ////////////////////////////////
  // 請求 film data
  .then ( data =&gt; {
    const filmAPI = data.results[0].films[0];
    return fetch(filmAPI); // return promise
  })
  //** 這邊跟上方的 response 是做一樣的事 **//
  .then( response =&gt; {
    console.log(response);
    if (!response.ok) {
      throw new Error(`Status: ${response.status}`);
      return;
    }
    return response.json(); // return promise
  })
  .then( filmData =&gt; {
    console.log(filmData);
  })
  //**                                **//
  ////////////////////////////////

  .catch( err =&gt; {
    // 只有在網路發生錯誤或是請求中斷才會是 promise rejected
    console.log(&#39;Catch 錯誤: &#39;, err);
  })</code></pre>
<p>這樣子看起來比較平整話，而且有部分重複的語法。</p>
<h1 id="AXIOS"><a href="#AXIOS" class="headerlink" title="AXIOS"></a>AXIOS</h1><ul>
<li>支援 promises</li>
<li>在瀏覽器中創建 XMLHttpRequests</li>
<li>支援IE</li>
</ul>
<h2 id="Post-Request"><a href="#Post-Request" class="headerlink" title="Post Request"></a>Post Request</h2><pre><code class="jsx">axios.post(&#39;/user&#39;, {
    firstName: &#39;Fred&#39;,
    lastName: &#39;Flintstone&#39;
  })
  .then(function (response) {
    console.log(response);
  })
  .catch(function (error) {
    console.log(error);
  });</code></pre>
<p><strong>HexSchool 註冊帳號範例：</strong></p>
<pre><code class="jsx">const api = &#39;https://hexschool-tutorial.herokuapp.com/api/signup&#39;;
axios.post(api, {
  email:&#39;abcdefddd@gmail.com&#39;,
  password: &#39;1234&#39;
})
.then(function (response) {
  console.log(response);
})
.catch(function (error) {
  console.log(error);
});</code></pre>
<p>Reference:</p>
<p>The Modern JavaScript Bootcamp<br><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">Using Fetch — MDN web docs</a><br><a href="https://github.com/axios/axios" target="_blank" rel="noopener">AXIOS</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-15T16:45:41.000Z" itemprop="datePublished">2020-08-16</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AJAX/" rel="tag">AJAX</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/AXIOS/" rel="tag">AXIOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Fetch/" rel="tag">Fetch</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-44-window-location"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/14/JS-Day-44-window-location/">JS Day 44: window.location</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="取得目前的網址與參數"><a href="#取得目前的網址與參數" class="headerlink" title="取得目前的網址與參數"></a>取得目前的網址與參數</h1><h2 id="語法"><a href="#語法" class="headerlink" title="語法"></a>語法</h2><pre><code class="jsx">let locationObj = window.location;

console.log(locationObj);</code></pre>
<h2 id="屬性"><a href="#屬性" class="headerlink" title="屬性"></a>屬性</h2><p>範例網址：<a href="http://127.0.0.1:5506/44/index.html?q=%27username%27&amp;status=true#title" target="_blank" rel="noopener">http://127.0.0.1:5506/44/index.html?q=%27username%27&amp;status=true#title</a></p>
<p><img src="https://drive.google.com/uc?export=view&id=1IPhpvsOWkeGiwpO7bv9VjQpSAk-ySEU6" alt="https://drive.google.com/uc?export=view&amp;id=1IPhpvsOWkeGiwpO7bv9VjQpSAk-ySEU6"></p>
<h2 id="跳頁"><a href="#跳頁" class="headerlink" title="跳頁"></a>跳頁</h2><h3 id="回到上一頁"><a href="#回到上一頁" class="headerlink" title="回到上一頁"></a>回到上一頁</h3><pre><code class="jsx">window.history.go(-1);
history.go(-1); // 省略 window, 一樣可以動作

window.history.back(); // 另一個方法</code></pre>
<h3 id="回到下一頁"><a href="#回到下一頁" class="headerlink" title="回到下一頁"></a>回到下一頁</h3><pre><code class="jsx">window.history.go(1);

window.history.forward();</code></pre>
<h3 id="回到第-N-頁-window-history-go-arg"><a href="#回到第-N-頁-window-history-go-arg" class="headerlink" title="回到第 N 頁: window.history.go(arg)"></a>回到第 N 頁: window.history.go(arg)</h3><p>範例：</p>
<ul>
<li><a href="http://www.google.com" target="_blank" rel="noopener">www.google.com</a></li>
<li><a href="http://www.yahoo.com" target="_blank" rel="noopener">www.yahoo.com</a></li>
<li><a href="http://www.tesla.com" target="_blank" rel="noopener">www.tesla.com</a> (當前網頁)</li>
<li><a href="http://www.lego.com" target="_blank" rel="noopener">www.lego.com</a></li>
<li><a href="http://www.abc.com" target="_blank" rel="noopener">www.abc.com</a></li>
</ul>
<pre><code class="jsx">window.history.go(-2); // 參數是正數就往上 2 頁 (forward), www.google.com
window.history.go(1);  // 參數是負數就往下 1 頁 (back), www.lego.com
window.history.go(0);  // 參數是 0 則重新載入現在頁面, refresh www.testla.com</code></pre>
<h3 id="重新整理當前頁面"><a href="#重新整理當前頁面" class="headerlink" title="重新整理當前頁面"></a>重新整理當前頁面</h3><p>除了上面提到的 <code>window.history.go(0)</code> 還有 <code>reload()</code> 方法可以用:</p>
<pre><code class="jsx">window.location.reload();

window.location.reload(true); 
// window.location.reload(forcedReload) 裡面的 forceReload 是 boolean</code></pre>
<h3 id="頁面跳轉"><a href="#頁面跳轉" class="headerlink" title="頁面跳轉"></a>頁面跳轉</h3><pre><code class="jsx">// window 皆可省略
window.location = &quot;http://www.lego.com&quot;; // location property
window.location.href = &quot;http://www.lego.com&quot;; // href property
window.location.assign(&#39;http://www.lego.com&#39;); // assign method
window.location.replace(&#39;http://www.lego.com&#39;); // replace method</code></pre>
<blockquote>
<p>replace 是置換掉現在的document，不會留下被置換掉的頁面紀錄，所以當你按下”上一頁”時回到的其實是你”上上個”看到的頁面 (reference-1)</p>
</blockquote>
<p>Reference:<br><a href="http://cat-son.blogspot.com/2012/11/javascript-windowlocation.html#sthash.UeM0Vl5j.ncVtroJF.dpbs" target="_blank" rel="noopener">JavaScript 筆記 - window.location 類別</a><br><a href="https://ithelp.ithome.com.tw/articles/10190061" target="_blank" rel="noopener">JavaScript 刷新頁面的幾種方法</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/API/Window/location" target="_blank" rel="noopener">window.location</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-13T16:04:39.000Z" itemprop="datePublished">2020-08-14</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Location/" rel="tag">Location</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  
    
      <article
  id="post-JS-Day-42-Date-方法＆日期格式"
  class="article article-type-post"
>

  <div class="article-inner">
    

    <div class="article-body">
      <header class="article-title">
        <a href="/notes/2020/08/08/JS-Day-42-Date-%E6%96%B9%E6%B3%95%EF%BC%86%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F/">JS Day 42: Date() 方法＆日期格式</a>
      </header>
      <div class="article-entry post-inner-html">
        
          <h1 id="Getter"><a href="#Getter" class="headerlink" title="Getter"></a>Getter</h1><p>取得時間格式</p>
<pre><code class="jsx">const  today = new Date(); // Date Sat Aug 08 2020 00:28:32 GMT+0800 (Taipei Standard Time)

// 回傳年份
today.getFullYear(); // 2020

// 回傳月份 (0-11) ** 從 0 開始
today.getMonth(); // 7

// 回傳日期（1-31)
today.getDate(); // 8

// 回傳小時（0-23）
today.getHours(); // 0

// 回傳分鐘（0-59）
today.getMinutes(); // 28

// 回傳日期（0-6）** 從 0 開始
today.getDay(); // 6</code></pre>
<h1 id="Setter"><a href="#Setter" class="headerlink" title="Setter"></a>Setter</h1><p>設定時間格式</p>
<pre><code class="jsx">// 設定月份中的日期
today.setDate();

const bday = new Date(&#39;August 08, 2020 11:26:15&#39;);
event.setDate(05); // 設定程 5 號
// =&gt; 1596597975000
console.log(event); // Date Wed Aug 05 2020 11:26:15 GMT+0800 (Taipei Standard Time)

// 設定完整年份
today.setFullYear();

// 設定月份
today.setMonth();

// 設定小時
today.setHours();

// 設定分鐘
today.setMinutes();

// 設定秒數
today.setSeconds();</code></pre>
<h1 id="時間格式"><a href="#時間格式" class="headerlink" title="時間格式"></a>時間格式</h1><p>設定時間格式 例：2020/08/05</p>
<pre><code class="jsx">const setDate = new Date(2020, 07, 05);
let df = (date) =&gt; {

  const year = date.getFullYear();
  const month = date.getMonth()+1;
  const day = date.getDate();

  return [year, month, day].join(&quot;/&quot;);
};

console.log(df(setDate));</code></pre>
<p>不過這樣寫不夠靈活。如果遇到格式是 2020-8-5 或是 2020-08-05 整式函式都要重寫。</p>
<pre><code class="jsx">Date.prototype.dateFormat = function(format){
  var obj = {
        // 這邊的 this 會指向 Date()
    &quot;y+&quot;: this.getFullYear(),                //年
    &quot;M+&quot;: this.getMonth()+1,                 //月份
    &quot;d+&quot;: this.getDate(),                    //日
    &quot;h+&quot;: this.getHours(),                   //小時
    &quot;m+&quot;: this.getMinutes(),                 //分
    &quot;s+&quot;: this.getSeconds(),                 //秒
    &quot;S&quot; : this.getMilliseconds()             //毫秒
  };
    // 物件的 key 代表 regular expression 的規則
  // ＋號：匹配前一字元 1 至多次，等同於 {1,}。
    // 例如：/a+/ 匹配「candy」中的 a，以及所有「caaaaaaandy」中的 a。

  for (let key in obj) {
    // create a regular expression
        const regex = new RegExp(`(${key})`); // 這邊的 key 需要用括號包住( )，參考 capturing parentheses
                                                // 括號會記住此次的匹配，之後用以用 RegExp.$1..$n 呼叫

    if (regex.test(format)) {
      if (regex == &#39;/(M+)/&#39; || regex == &#39;/(d+)/&#39;) {
        format = format.replace(
                    regex, (RegExp.$1.length &lt; 2 ? obj[key] : (&quot;00&quot; + obj[key]).substring(1,obj[key].length))
                    // RegExp.$1 會回傳 M 跟 d 的長度
                    // 如果是 MM 就會組合成 00+月 = 008 再去刪掉最前方的0 也就是 obj[key].length
                );
      } else {
        format = format.replace(regex, obj[key]);
      }
    }
  }
  console.log(format);
  return format;
}

let ccc = new Date().dateFormat(&#39;yyyy/MM/d&#39;); // 2020/08/8
let aaa = new Date().dateFormat(&#39;yyyy-M-dd&#39;); // 2020-8-08
let bbb = new Date().dateFormat(&#39;yyyy/MM/dd&#39;); // 2020/08/08</code></pre>
<p>Reference:<br><a href="https://www.runoob.com/js/js-obj-date.html" target="_blank" rel="noopener">JavaScript Date (日期) 對象</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test" target="_blank" rel="noopener">RegExp.prototype.test() – MDN web docs</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Regular_Expressions#special-plus" target="_blank" rel="noopener">Regular Expression: ＋ (plus sign) — MDN web docs</a><br><a href="https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Regular_Expressions#special-capturing-parentheses" target="_blank" rel="noopener">Regular Expression: Capturing Parentheses — MDN web docs</a></p>

        
      </div>
    </div>

  </div>

  <footer class="article-footer">
    <div class="article-more-info">
      <div class="article-date">
  <time datetime="2020-08-08T05:15:12.000Z" itemprop="datePublished">2020-08-08</time>
</div>
      
        <div class="article-category">
          <a class="article-category-link" href="/notes/categories/JavaScript/">JavaScript</a>
        </div>
      
      
        <div class="article-tag">
          <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/Date/" rel="tag">Date</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>
        </div>
      
    </div>
  </footer>


</article>

    
  

  
    <nav class="pagination">
      
      <span class="page-number current">1</span><a class="page-number" href="/notes/page/2/">2</a><a class="extend next" rel="next" href="/notes/page/2/">下一页</a>
    </nav>
  
</div>

        </section>
      </section>
      <aside class="sidebar">
        <div class="widget">
          

  

  
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/notes/categories/Database/">Database</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/DevTool/">DevTool</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/HTML-CSS/">HTML, CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/Resources/">Resources</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/notes/categories/Vue-js/">Vue.js</a></li></ul>
    </div>
  </div>



  
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/AJAX/" rel="tag">AJAX</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/AXIOS/" rel="tag">AXIOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/ArrowFunction/" rel="tag">ArrowFunction</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/CSSoverview/" rel="tag">CSSoverview</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Chrome/" rel="tag">Chrome</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Const/" rel="tag">Const</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Date/" rel="tag">Date</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/DatePicker/" rel="tag">DatePicker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/DevTool/" rel="tag">DevTool</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Experiments/" rel="tag">Experiments</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Fetch/" rel="tag">Fetch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Firebase/" rel="tag">Firebase</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Form/" rel="tag">Form</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/HTML/" rel="tag">HTML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Headless/" rel="tag">Headless</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Hoisting/" rel="tag">Hoisting</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/JSnewbie/" rel="tag">JSnewbie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Let/" rel="tag">Let</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Location/" rel="tag">Location</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Rails/" rel="tag">Rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Regex/" rel="tag">Regex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Ruby/" rel="tag">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Selenium/" rel="tag">Selenium</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Table/" rel="tag">Table</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Token/" rel="tag">Token</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/Var/" rel="tag">Var</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/VueCLI/" rel="tag">VueCLI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/XMLHttpRequest/" rel="tag">XMLHttpRequest</a></li><li class="tag-list-item"><a class="tag-list-link" href="/notes/tags/this/" rel="tag">this</a></li></ul>
    </div>
  </div>



  
  <div class="widget-wrap widget-recent-posts">
    <div class="widget-title"><span>Recent Posts</span></div>
    <div class="widget-inner">
      <ul>
        
          <li>
            <a href="/notes/2020/09/18/Vue-CLI-%E7%92%B0%E5%A2%83%E8%AE%8A%E6%95%B8-%E6%A8%A1%E5%BC%8F/">Vue CLI - 環境變數&amp;模式</a>
          </li>
        
          <li>
            <a href="/notes/2020/09/17/Firebase-Actions/">Firebase Actions</a>
          </li>
        
          <li>
            <a href="/notes/2020/09/12/%E5%AD%B8%E7%BF%92%E8%B3%87%E6%BA%90/">學習資源</a>
          </li>
        
          <li>
            <a href="/notes/2020/09/09/%E5%9C%A8-Table-%E8%A3%A1%E9%9D%A2%E4%BD%BF%E7%94%A8-Form/">在 Table 裡面使用 Form</a>
          </li>
        
          <li>
            <a href="/notes/2020/08/26/JS-%E7%B0%A1%E6%98%93-Date-Picker/">JS: 簡易 Date Picker</a>
          </li>
        
      </ul>
    </div>
  </div>


  
  <div class="widget-wrap widget-archive">
    <div class="widget-title"><span>Archive</span></div>
    <div class="widget-inner">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/notes/archives/2020/09/">2020</a></li></ul>
    </div>
  </div>



        </div>
        <div id="backtop"><i class="icon icon-arrow-up"></i></div>
      </aside>
    </div>
  </div>

  <footer class="footer">
    <div class="footer-inner">
        <div class="footer-info">
            <span>&copy; 2013 - 2020 William&#39;s Notes</span>
        </div>
        <div class="footer-powered">
            <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a> Theme · Powered By Hexo
        </div>
    </div>
</footer>




<script src="/notes/dist/build.js?1.5.0.js"></script>


<script src="/notes/dist/custom.js?1.5.0.js"></script>





<!-- Google Analytics-->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-173126595-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-173126595-1');
</script>




</body>
</html>